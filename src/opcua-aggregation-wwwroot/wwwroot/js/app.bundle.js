!function(){"use strict";var e,t,r,n,i,o,a,s,l,u,c,f,d,v,h,p,y,m,g,w,b,x,_,k,S,O,E,M,C,T,j,I,P,A,D,R,z,N,U,L,$,q,F,K,G,H,V="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function B(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function W(){if(t)return e;function r(e,t,r,n,i,o){return{tag:e,key:t,attrs:r,children:n,text:i,dom:o,domSize:void 0,state:void 0,events:void 0,instance:void 0}}return t=1,r.normalize=function(e){return Array.isArray(e)?r("[",void 0,void 0,r.normalizeChildren(e),void 0,void 0):null==e||"boolean"==typeof e?null:"object"==typeof e?e:r("#",void 0,void 0,String(e),void 0,void 0)},r.normalizeChildren=function(e){var t=[];if(e.length){for(var n=null!=e[0]&&null!=e[0].key,i=1;i<e.length;i++)if((null!=e[i]&&null!=e[i].key)!==n)throw new TypeError(!n||null==e[i]&&"boolean"!=typeof e[i]?"In fragments, vnodes must either all have keys or none have keys.":"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.");for(i=0;i<e.length;i++)t[i]=r.normalize(e[i])}return t},e=r}function J(){if(n)return r;n=1;var e=W();return r=function(){var t,r=arguments[this],n=this+1;if(null==r?r={}:("object"!=typeof r||null!=r.tag||Array.isArray(r))&&(r={},n=this),arguments.length===n+1)t=arguments[n],Array.isArray(t)||(t=[t]);else for(t=[];n<arguments.length;)t.push(arguments[n++]);return e("",r.key,r,t)},r}function Q(){return o?i:(o=1,i={}.hasOwnProperty)}function X(){if(s)return a;s=1;var e=W(),t=J(),r=Q(),n=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,i=Object.create(null);function o(e){for(var t,o="div",a=[],s={};t=n.exec(e);){var l=t[1],u=t[2];if(""===l&&""!==u)o=u;else if("#"===l)s.id=u;else if("."===l)a.push(u);else if("["===t[3][0]){var c=t[6];c&&(c=c.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===t[4]?a.push(c):s[t[4]]=""===c?c:c||!0}}return a.length>0&&(s.className=a.join(" ")),function(e){for(var t in e)if(r.call(e,t))return!1;return!0}(s)&&(s=null),i[e]={tag:o,attrs:s}}return a=function(n){if(null==n||"string"!=typeof n&&"function"!=typeof n&&"function"!=typeof n.view)throw Error("The selector must be either a string or a component.");var a=t.apply(1,arguments);return"string"==typeof n&&(a.children=e.normalizeChildren(a.children),"["!==n)?function(e,t){var n=t.attrs,i=r.call(n,"class"),o=i?n.class:n.className;return t.tag=e.tag,null!=e.attrs?(n=Object.assign({},e.attrs,n),null==o&&null==e.attrs.className||(n.className=null!=o?null!=e.attrs.className?String(e.attrs.className)+" "+String(o):o:null!=e.attrs.className?e.attrs.className:null)):null!=o&&(n.className=o),i&&(n.class=null),"input"===e.tag&&r.call(n,"type")&&(n=Object.assign({type:n.type},n)),t.attrs=n,t}(i[n]||o(n),a):(a.tag=n,a)},a}function Y(){if(v)return d;v=1;var e=X();return e.trust=function(){if(u)return l;u=1;var e=W();return l=function(t){return null==t&&(t=""),e("<",void 0,void 0,t,void 0,void 0)}}(),e.fragment=function(){if(f)return c;f=1;var e=W(),t=J();return c=function(){var r=t.apply(0,arguments);return r.tag="[",r.children=e.normalizeChildren(r.children),r},c}(),d=e}function Z(){if(p)return h;p=1;var e=new WeakMap;return h={delayedRemoval:e,domFor:function*(t,r={}){var n=t.dom,i=t.domSize,o=r.generation;if(null!=n)do{var a=n.nextSibling;e.get(n)===o&&(yield n,i--),n=a}while(i)}},h}function ee(){if(m)return y;m=1;var e=W(),t=Z(),r=t.delayedRemoval,n=t.domFor;return y=function(){var t,i,o={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function a(e){return e.ownerDocument}function s(e){return e.attrs&&e.attrs.xmlns||o[e.tag]}function l(e,t){if(e.state!==t)throw new Error("'vnode.state' must not be modified.")}function u(e){var t=e.state;try{return this.apply(t,arguments)}finally{l(e,t)}}function c(e){try{return a(e).activeElement}catch(e){return null}}function f(e,t,r,n,i,o,a){for(var s=r;s<n;s++){var l=t[s];null!=l&&d(e,l,i,a,o)}}function d(t,r,n,i,o){var l=r.tag;if("string"==typeof l)switch(r.state={},null!=r.attrs&&R(r.attrs,r,n),l){case"#":!function(e,t,r){t.dom=a(e).createTextNode(t.children),_(e,t.dom,r)}(t,r,o);break;case"<":h(t,r,i,o);break;case"[":!function(e,t,r,n,i){var o=a(e).createDocumentFragment();if(null!=t.children){var s=t.children;f(o,s,0,s.length,r,null,n)}t.dom=o.firstChild,t.domSize=o.childNodes.length,_(e,o,i)}(t,r,n,i,o);break;default:!function(e,t,r,n,i){var o=t.tag,l=t.attrs,u=l&&l.is;n=s(t)||n;var c=n?u?a(e).createElementNS(n,o,{is:u}):a(e).createElementNS(n,o):u?a(e).createElement(o,{is:u}):a(e).createElement(o);t.dom=c,null!=l&&function(e,t,r){for(var n in t)C(e,n,null,t[n],r)}(t,l,n);if(_(e,c,i),!k(t)&&null!=t.children){var d=t.children;f(c,d,0,d.length,r,null,n),"select"===t.tag&&null!=l&&function(e,t){if("value"in t)if(null===t.value)-1!==e.dom.selectedIndex&&(e.dom.value=null);else{var r=""+t.value;e.dom.value===r&&-1!==e.dom.selectedIndex||(e.dom.value=r)}"selectedIndex"in t&&C(e,"selectedIndex",null,t.selectedIndex,void 0)}(t,l)}}(t,r,n,i,o)}else!function(t,r,n,i,o){(function(t,r){var n;if("function"==typeof t.tag.view){if(t.state=Object.create(t.tag),null!=(n=t.state.view).$$reentrantLock$$)return;n.$$reentrantLock$$=!0}else{if(t.state=void 0,null!=(n=t.tag).$$reentrantLock$$)return;n.$$reentrantLock$$=!0,t.state=null!=t.tag.prototype&&"function"==typeof t.tag.prototype.view?new t.tag(t):t.tag(t)}R(t.state,t,r),null!=t.attrs&&R(t.attrs,t,r);if(t.instance=e.normalize(u.call(t.state.view,t)),t.instance===t)throw Error("A view cannot return the vnode it received as argument");n.$$reentrantLock$$=null})(r,n),null!=r.instance?(d(t,r.instance,n,i,o),r.dom=r.instance.dom,r.domSize=null!=r.dom?r.instance.domSize:0):r.domSize=0}(t,r,n,i,o)}var v={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function h(e,t,r,n){var i=t.children.match(/^\s*?<(\w+)/im)||[],o=a(e).createElement(v[i[1]]||"div");"http://www.w3.org/2000/svg"===r?(o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t.children+"</svg>",o=o.firstChild):o.innerHTML=t.children,t.dom=o.firstChild,t.domSize=o.childNodes.length;for(var s,l=a(e).createDocumentFragment();s=o.firstChild;)l.appendChild(s);_(e,l,n)}function p(e,t,r,n,i,o){if(t!==r&&(null!=t||null!=r))if(null==t||0===t.length)f(e,r,0,r.length,n,i,o);else if(null==r||0===r.length)S(e,t,0,t.length);else{var a=null!=t[0]&&null!=t[0].key,s=null!=r[0]&&null!=r[0].key,l=0,u=0;if(!a)for(;u<t.length&&null==t[u];)u++;if(!s)for(;l<r.length&&null==r[l];)l++;if(a!==s)S(e,t,u,t.length),f(e,r,l,r.length,n,i,o);else if(s){for(var c,v,h,p,g,_=t.length-1,k=r.length-1;_>=u&&k>=l&&(h=t[_],p=r[k],h.key===p.key);)h!==p&&y(e,h,p,n,i,o),null!=p.dom&&(i=p.dom),_--,k--;for(;_>=u&&k>=l&&(c=t[u],v=r[l],c.key===v.key);)u++,l++,c!==v&&y(e,c,v,n,b(t,u,i),o);for(;_>=u&&k>=l&&l!==k&&c.key===p.key&&h.key===v.key;)x(e,h,g=b(t,u,i)),h!==v&&y(e,h,v,n,g,o),++l<=--k&&x(e,c,i),c!==p&&y(e,c,p,n,i,o),null!=p.dom&&(i=p.dom),u++,h=t[--_],p=r[k],c=t[u],v=r[l];for(;_>=u&&k>=l&&h.key===p.key;)h!==p&&y(e,h,p,n,i,o),null!=p.dom&&(i=p.dom),k--,h=t[--_],p=r[k];if(l>k)S(e,t,u,_+1);else if(u>_)f(e,r,l,k+1,n,i,o);else{var E,M,C=i,T=k-l+1,j=new Array(T),I=0,P=0,A=2147483647,D=0;for(P=0;P<T;P++)j[P]=-1;for(P=k;P>=l;P--){null==E&&(E=m(t,u,_+1));var R=E[(p=r[P]).key];null!=R&&(A=R<A?R:-1,j[P-l]=R,h=t[R],t[R]=null,h!==p&&y(e,h,p,n,i,o),null!=p.dom&&(i=p.dom),D++)}if(i=C,D!==_-u+1&&S(e,t,u,_+1),0===D)f(e,r,l,k+1,n,i,o);else if(-1===A)for(M=function(e){var t=[0],r=0,n=0,i=0,o=w.length=e.length;for(i=0;i<o;i++)w[i]=e[i];for(i=0;i<o;++i)if(-1!==e[i]){var a=t[t.length-1];if(e[a]<e[i])w[i]=a,t.push(i);else{for(r=0,n=t.length-1;r<n;){var s=(r>>>1)+(n>>>1)+(r&n&1);e[t[s]]<e[i]?r=s+1:n=s}e[i]<e[t[r]]&&(r>0&&(w[i]=t[r-1]),t[r]=i)}}r=t.length,n=t[r-1];for(;r-- >0;)t[r]=n,n=w[n];return w.length=0,t}(j),I=M.length-1,P=k;P>=l;P--)v=r[P],-1===j[P-l]?d(e,v,n,o,i):M[I]===P-l?I--:x(e,v,i),null!=v.dom&&(i=r[P].dom);else for(P=k;P>=l;P--)v=r[P],-1===j[P-l]&&d(e,v,n,o,i),null!=v.dom&&(i=r[P].dom)}}else{var z=t.length<r.length?t.length:r.length;for(l=l<u?l:u;l<z;l++)(c=t[l])===(v=r[l])||null==c&&null==v||(null==c?d(e,v,n,o,b(t,l+1,i)):null==v?O(e,c):y(e,c,v,n,b(t,l+1,i),o));t.length>z&&S(e,t,l,t.length),r.length>z&&f(e,r,l,r.length,n,i,o)}}}function y(t,r,n,i,o,a){var l=r.tag;if(l===n.tag){if(n.state=r.state,n.events=r.events,function(e,t){do{var r;if(null!=e.attrs&&"function"==typeof e.attrs.onbeforeupdate)if(void 0!==(r=u.call(e.attrs.onbeforeupdate,e,t))&&!r)break;if("string"!=typeof e.tag&&"function"==typeof e.state.onbeforeupdate)if(void 0!==(r=u.call(e.state.onbeforeupdate,e,t))&&!r)break;return!1}while(0);return e.dom=t.dom,e.domSize=t.domSize,e.instance=t.instance,e.attrs=t.attrs,e.children=t.children,e.text=t.text,!0}(n,r))return;if("string"==typeof l)switch(null!=n.attrs&&z(n.attrs,n,i),l){case"#":!function(e,t){e.children.toString()!==t.children.toString()&&(e.dom.nodeValue=t.children);t.dom=e.dom}(r,n);break;case"<":!function(e,t,r,n,i){t.children!==r.children?(E(e,t,void 0),h(e,r,n,i)):(r.dom=t.dom,r.domSize=t.domSize)}(t,r,n,a,o);break;case"[":!function(e,t,r,n,i,o){p(e,t.children,r.children,n,i,o);var a=0,s=r.children;if(r.dom=null,null!=s){for(var l=0;l<s.length;l++){var u=s[l];null!=u&&null!=u.dom&&(null==r.dom&&(r.dom=u.dom),a+=u.domSize||1)}1!==a&&(r.domSize=a)}}(t,r,n,i,o,a);break;default:!function(e,t,r,n){var i=t.dom=e.dom;n=s(t)||n,function(e,t,r,n){t&&t===r&&console.warn("Don't reuse attrs object, use new object for every redraw, this will throw in next major");if(null!=r)for(var i in r)C(e,i,t&&t[i],r[i],n);var o;if(null!=t)for(var i in t)null==(o=t[i])||null!=r&&null!=r[i]||T(e,i,o,n)}(t,e.attrs,t.attrs,n),k(t)||p(i,e.children,t.children,r,null,n)}(r,n,i,a)}else!function(t,r,n,i,o,a){if(n.instance=e.normalize(u.call(n.state.view,n)),n.instance===n)throw Error("A view cannot return the vnode it received as argument");z(n.state,n,i),null!=n.attrs&&z(n.attrs,n,i);null!=n.instance?(null==r.instance?d(t,n.instance,i,a,o):y(t,r.instance,n.instance,i,o,a),n.dom=n.instance.dom,n.domSize=n.instance.domSize):null!=r.instance?(O(t,r.instance),n.dom=void 0,n.domSize=0):(n.dom=r.dom,n.domSize=r.domSize)}(t,r,n,i,o,a)}else O(t,r),d(t,n,i,a,o)}function m(e,t,r){for(var n=Object.create(null);t<r;t++){var i=e[t];if(null!=i){var o=i.key;null!=o&&(n[o]=t)}}return n}var g,w=[];function b(e,t,r){for(;t<e.length;t++)if(null!=e[t]&&null!=e[t].dom)return e[t].dom;return r}function x(e,t,r){if(null!=t.dom){var i;if(null==t.domSize)i=t.dom;else for(var o of(i=a(e).createDocumentFragment(),n(t)))i.appendChild(o);_(e,i,r)}}function _(e,t,r){null!=r?e.insertBefore(t,r):e.appendChild(t)}function k(e){if(null==e.attrs||null==e.attrs.contenteditable&&null==e.attrs.contentEditable)return!1;var t=e.children;if(null!=t&&1===t.length&&"<"===t[0].tag){var r=t[0].children;e.dom.innerHTML!==r&&(e.dom.innerHTML=r)}else if(null!=t&&0!==t.length)throw new Error("Child node of a contenteditable must be trusted.");return!0}function S(e,t,r,n){for(var i=r;i<n;i++){var o=t[i];null!=o&&O(e,o)}}function O(e,t){var o,a,s,c,f=0,d=t.state;"string"!=typeof t.tag&&"function"==typeof t.state.onbeforeremove&&(null!=(s=u.call(t.state.onbeforeremove,t))&&"function"==typeof s.then&&(f=1,o=s));t.attrs&&"function"==typeof t.attrs.onbeforeremove&&(null!=(s=u.call(t.attrs.onbeforeremove,t))&&"function"==typeof s.then&&(f|=2,a=s));if(l(t,d),f){for(var v of(c=i,n(t)))r.set(v,c);null!=o&&o.finally((function(){1&f&&((f&=2)||(l(t,d),M(t),E(e,t,c)))})),null!=a&&a.finally((function(){2&f&&((f&=1)||(l(t,d),M(t),E(e,t,c)))}))}else M(t),E(e,t,c)}function E(e,t,i){if(null!=t.dom)if(null==t.domSize)r.get(t.dom)===i&&e.removeChild(t.dom);else for(var o of n(t,{generation:i}))e.removeChild(o)}function M(e){if("string"!=typeof e.tag&&"function"==typeof e.state.onremove&&u.call(e.state.onremove,e),e.attrs&&"function"==typeof e.attrs.onremove&&u.call(e.attrs.onremove,e),"string"!=typeof e.tag)null!=e.instance&&M(e.instance);else{var t=e.children;if(Array.isArray(t))for(var r=0;r<t.length;r++){var n=t[r];null!=n&&M(n)}}}function C(e,t,r,n,i){if("key"!==t&&"is"!==t&&null!=n&&!j(t)&&(r!==n||function(e,t){return"value"===t||"checked"===t||"selectedIndex"===t||"selected"===t&&e.dom===c(e.dom)||"option"===e.tag&&e.dom.parentNode===c(e.dom)}(e,t)||"object"==typeof n)){if("o"===t[0]&&"n"===t[1])return D(e,t,n);if("xlink:"===t.slice(0,6))e.dom.setAttributeNS("http://www.w3.org/1999/xlink",t.slice(6),n);else if("style"===t)P(e.dom,r,n);else if(I(e,t,i)){if("value"===t){var o="input"===e.tag&&"file"===e.attrs.type;if(("input"===e.tag||"textarea"===e.tag)&&e.dom.value===""+n&&(o||e.dom===c(e.dom)))return;if("select"===e.tag&&null!==r&&e.dom.value===""+n)return;if("option"===e.tag&&null!==r&&e.dom.value===""+n)return;if(o&&""+n!="")return void console.error("`value` is read-only on file inputs!")}"input"===e.tag&&"type"===t?e.dom.setAttribute(t,n):e.dom[t]=n}else"boolean"==typeof n?n?e.dom.setAttribute(t,""):e.dom.removeAttribute(t):e.dom.setAttribute("className"===t?"class":t,n)}}function T(e,t,r,n){if("key"!==t&&"is"!==t&&null!=r&&!j(t))if("o"===t[0]&&"n"===t[1])D(e,t,void 0);else if("style"===t)P(e.dom,r,null);else if(!I(e,t,n)||"className"===t||"title"===t||"value"===t&&("option"===e.tag||"select"===e.tag&&-1===e.dom.selectedIndex&&e.dom===c(e.dom))||"input"===e.tag&&"type"===t){var i=t.indexOf(":");-1!==i&&(t=t.slice(i+1)),!1!==r&&e.dom.removeAttribute("className"===t?"class":t)}else e.dom[t]=null}function j(e){return"oninit"===e||"oncreate"===e||"onupdate"===e||"onremove"===e||"onbeforeremove"===e||"onbeforeupdate"===e}function I(e,t,r){return void 0===r&&(e.tag.indexOf("-")>-1||null!=e.attrs&&e.attrs.is||"href"!==t&&"list"!==t&&"form"!==t&&"width"!==t&&"height"!==t)&&t in e.dom}function P(e,t,r){if(t===r);else if(null==r)e.style="";else if("object"!=typeof r)e.style=r;else if(null==t||"object"!=typeof t)for(var n in e.style.cssText="",r){null!=(i=r[n])&&(n.includes("-")?e.style.setProperty(n,String(i)):e.style[n]=String(i))}else{for(var n in r){var i;null!=(i=r[n])&&(i=String(i))!==String(t[n])&&(n.includes("-")?e.style.setProperty(n,i):e.style[n]=i)}for(var n in t)null!=t[n]&&null==r[n]&&(n.includes("-")?e.style.removeProperty(n):e.style[n]="")}}function A(){this._=t}function D(e,r,n){if(null!=e.events){if(e.events._=t,e.events[r]===n)return;null==n||"function"!=typeof n&&"object"!=typeof n?(null!=e.events[r]&&e.dom.removeEventListener(r.slice(2),e.events,!1),e.events[r]=void 0):(null==e.events[r]&&e.dom.addEventListener(r.slice(2),e.events,!1),e.events[r]=n)}else null==n||"function"!=typeof n&&"object"!=typeof n||(e.events=new A,e.dom.addEventListener(r.slice(2),e.events,!1),e.events[r]=n)}function R(e,t,r){"function"==typeof e.oninit&&u.call(e.oninit,t),"function"==typeof e.oncreate&&r.push(u.bind(e.oncreate,t))}function z(e,t,r){"function"==typeof e.onupdate&&r.push(u.bind(e.onupdate,t))}return A.prototype=Object.create(null),A.prototype.handleEvent=function(e){var t,r=this["on"+e.type];"function"==typeof r?t=r.call(e.currentTarget,e):"function"==typeof r.handleEvent&&r.handleEvent(e),this._&&!1!==e.redraw&&(0,this._)(),!1===t&&(e.preventDefault(),e.stopPropagation())},function(r,n,o){if(!r)throw new TypeError("DOM element being rendered to does not exist.");if(null!=g&&r.contains(g))throw new TypeError("Node is currently being rendered to and thus is locked.");var a=t,s=g,l=[],u=c(r),f=r.namespaceURI;g=r,t="function"==typeof o?o:void 0,i={};try{null==r.vnodes&&(r.textContent=""),n=e.normalizeChildren(Array.isArray(n)?n:[n]),p(r,r.vnodes,n,l,null,"http://www.w3.org/1999/xhtml"===f?void 0:f),r.vnodes=n,null!=u&&c(r)!==u&&"function"==typeof u.focus&&u.focus();for(var d=0;d<l.length;d++)l[d]()}finally{t=a,g=s}}},y}function te(){return w?g:(w=1,g=ee()("undefined"!=typeof window?window:null))}function re(){if(k)return _;k=1;var e=te();return _=function(){if(x)return b;x=1;var e=W();return b=function(t,r,n){var i=[],o=!1,a=-1;function s(){for(a=0;a<i.length;a+=2)try{t(i[a],e(i[a+1]),l)}catch(e){n.error(e)}a=-1}function l(){o||(o=!0,r((function(){o=!1,s()})))}return l.sync=s,{mount:function(r,n){if(null!=n&&null==n.view&&"function"!=typeof n)throw new TypeError("m.mount expects a component, not a vnode.");var o=i.indexOf(r);o>=0&&(i.splice(o,2),o<=a&&(a-=2),t(r,[])),null!=n&&(i.push(r,n),t(r,e(n),l))},redraw:l}},b}()(e,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:null,"undefined"!=typeof console?console:null),_}function ne(){return O?S:(O=1,S=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return"";var t=[];for(var r in e)n(r,e[r]);return t.join("&");function n(e,r){if(Array.isArray(r))for(var i=0;i<r.length;i++)n(e+"["+i+"]",r[i]);else if("[object Object]"===Object.prototype.toString.call(r))for(var i in r)n(e+"["+i+"]",r[i]);else t.push(encodeURIComponent(e)+(null!=r&&""!==r?"="+encodeURIComponent(r):""))}})}function ie(){if(M)return E;M=1;var e=ne();return E=function(t,r){if(/:([^\/\.-]+)(\.{3})?:/.test(t))throw new SyntaxError("Template parameter names must be separated by either a '/', '-', or '.'.");if(null==r)return t;var n=t.indexOf("?"),i=t.indexOf("#"),o=i<0?t.length:i,a=n<0?o:n,s=t.slice(0,a),l={};Object.assign(l,r);var u=s.replace(/:([^\/\.-]+)(\.{3})?/g,(function(e,t,n){return delete l[t],null==r[t]?e:n?r[t]:encodeURIComponent(String(r[t]))})),c=u.indexOf("?"),f=u.indexOf("#"),d=f<0?u.length:f,v=c<0?d:c,h=u.slice(0,v);n>=0&&(h+=t.slice(n,o)),c>=0&&(h+=(n<0?"?":"&")+u.slice(c,d));var p=e(l);return p&&(h+=(n<0&&c<0?"?":"&")+p),i>=0&&(h+=t.slice(i)),f>=0&&(h+=(i<0?"":"&")+u.slice(f)),h},E}function oe(){if(T)return C;T=1;var e=ie(),t=Q();return C=function(r,n){function i(e){return new Promise(e)}function o(e,r){for(var n in e.headers)if(t.call(e.headers,n)&&n.toLowerCase()===r)return!0;return!1}return i.prototype=Promise.prototype,i.__proto__=Promise,{request:function(a,s){"string"!=typeof a?(s=a,a=a.url):null==s&&(s={});var l=function(n,i){return new Promise((function(a,s){n=e(n,i.params);var l,u=null!=i.method?i.method.toUpperCase():"GET",c=i.body,f=(null==i.serialize||i.serialize===JSON.serialize)&&!(c instanceof r.FormData||c instanceof r.URLSearchParams),d=i.responseType||("function"==typeof i.extract?"":"json"),v=new r.XMLHttpRequest,h=!1,p=!1,y=v,m=v.abort;for(var g in v.abort=function(){h=!0,m.call(this)},v.open(u,n,!1!==i.async,"string"==typeof i.user?i.user:void 0,"string"==typeof i.password?i.password:void 0),f&&null!=c&&!o(i,"content-type")&&v.setRequestHeader("Content-Type","application/json; charset=utf-8"),"function"==typeof i.deserialize||o(i,"accept")||v.setRequestHeader("Accept","application/json, text/*"),i.withCredentials&&(v.withCredentials=i.withCredentials),i.timeout&&(v.timeout=i.timeout),v.responseType=d,i.headers)t.call(i.headers,g)&&v.setRequestHeader(g,i.headers[g]);v.onreadystatechange=function(e){if(!h&&4===e.target.readyState)try{var t,r=e.target.status>=200&&e.target.status<300||304===e.target.status||/^file:\/\//i.test(n),o=e.target.response;if("json"===d){if(!e.target.responseType&&"function"!=typeof i.extract)try{o=JSON.parse(e.target.responseText)}catch(e){o=null}}else d&&"text"!==d||null==o&&(o=e.target.responseText);if("function"==typeof i.extract?(o=i.extract(e.target,i),r=!0):"function"==typeof i.deserialize&&(o=i.deserialize(o)),r){if("function"==typeof i.type)if(Array.isArray(o))for(var l=0;l<o.length;l++)o[l]=new i.type(o[l]);else o=new i.type(o);a(o)}else{var u=function(){try{t=e.target.responseText}catch(e){t=o}var r=new Error(t);r.code=e.target.status,r.response=o,s(r)};0===v.status?setTimeout((function(){p||u()})):u()}}catch(e){s(e)}},v.ontimeout=function(e){p=!0;var t=new Error("Request timed out");t.code=e.target.status,s(t)},"function"==typeof i.config&&(v=i.config(v,i,n)||v)!==y&&(l=v.abort,v.abort=function(){h=!0,l.call(this)}),null==c?v.send():"function"==typeof i.serialize?v.send(i.serialize(c)):c instanceof r.FormData||c instanceof r.URLSearchParams?v.send(c):v.send(JSON.stringify(c))}))}(a,s);if(!0===s.background)return l;var u=0;function c(){0==--u&&"function"==typeof n&&n()}return function e(t){var r=t.then;return t.constructor=i,t.then=function(){u++;var n=r.apply(t,arguments);return n.then(c,(function(e){if(c(),0===u)throw e})),e(n)},t}(l)}}},C}function ae(){if(I)return j;I=1;var e=re();return j=oe()("undefined"!=typeof window?window:null,e.redraw)}function se(){if(A)return P;function e(e){try{return decodeURIComponent(e)}catch(t){return e}}return A=1,P=function(t){if(""===t||null==t)return{};"?"===t.charAt(0)&&(t=t.slice(1));for(var r=t.split("&"),n={},i={},o=0;o<r.length;o++){var a=r[o].split("="),s=e(a[0]),l=2===a.length?e(a[1]):"";"true"===l?l=!0:"false"===l&&(l=!1);var u=s.split(/\]\[?|\[/),c=i;s.indexOf("[")>-1&&u.pop();for(var f=0;f<u.length;f++){var d=u[f],v=u[f+1],h=""==v||!isNaN(parseInt(v,10));if(""===d)null==n[s=u.slice(0,f).join()]&&(n[s]=Array.isArray(c)?c.length:0),d=n[s]++;else if("__proto__"===d)break;if(f===u.length-1)c[d]=l;else{var p=Object.getOwnPropertyDescriptor(c,d);null!=p&&(p=p.value),null==p&&(c[d]=p=h?[]:{}),c=p}}}return i}}function le(){if(R)return D;R=1;var e=se();return D=function(t){var r=t.indexOf("?"),n=t.indexOf("#"),i=n<0?t.length:n,o=r<0?i:r,a=t.slice(0,o).replace(/\/{2,}/g,"/");return a?"/"!==a[0]&&(a="/"+a):a="/",{path:a,params:r<0?{}:e(t.slice(r+1,i))}}}function ue(){if(N)return z;N=1;var e=le();return z=function(t){var r=e(t),n=Object.keys(r.params),i=[],o=new RegExp("^"+r.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,(function(e,t,r){return null==t?"\\"+e:(i.push({k:t,r:"..."===r}),"..."===r?"(.*)":"."===r?"([^/]+)\\.":"([^/]+)"+(r||""))}))+"$");return function(e){for(var t=0;t<n.length;t++)if(r.params[n[t]]!==e.params[n[t]])return!1;if(!i.length)return o.test(e.path);var a=o.exec(e.path);if(null==a)return!1;for(t=0;t<i.length;t++)e.params[i[t].k]=i[t].r?a[t+1]:decodeURIComponent(a[t+1]);return!0}},z}function ce(){if(L)return U;L=1;var e=Q(),t=new RegExp("^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$");return U=function(r,n){var i={};if(null!=n)for(var o in r)e.call(r,o)&&!t.test(o)&&n.indexOf(o)<0&&(i[o]=r[o]);else for(var o in r)e.call(r,o)&&!t.test(o)&&(i[o]=r[o]);return i}}function fe(){if(K)return F;K=1;var e=re();return F=function(){if(q)return $;q=1;var e=W(),t=X(),r=ie(),n=le(),i=ue(),o=ce(),a={};function s(e){try{return decodeURIComponent(e)}catch(t){return e}}return $=function(l,u){var c,f,d,v,h,p,y=null==l?null:"function"==typeof l.setImmediate?l.setImmediate:l.setTimeout,m=Promise.resolve(),g=!1,w=!1,b=0,x=a,_={onbeforeupdate:function(){return!(!(b=b?2:1)||a===x)},onremove:function(){l.removeEventListener("popstate",O,!1),l.removeEventListener("hashchange",S,!1)},view:function(){if(b&&a!==x){var t=[e(d,v.key,v)];return x&&(t=x.render(t[0])),t}}},k=M.SKIP={};function S(){g=!1;var e=l.location.hash;"#"!==M.prefix[0]&&(e=l.location.search+e,"?"!==M.prefix[0]&&"/"!==(e=l.location.pathname+e)[0]&&(e="/"+e));var t=e.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,s).slice(M.prefix.length),r=n(t);function i(e){console.error(e),E(f,null,{replace:!0})}Object.assign(r.params,l.history.state),function e(n){for(;n<c.length;n++)if(c[n].check(r)){var o=c[n].component,a=c[n].route,s=o,l=p=function(i){if(l===p){if(i===k)return e(n+1);d=null==i||"function"!=typeof i.view&&"function"!=typeof i?"div":i,v=r.params,h=t,p=null,x=o.render?o:null,2===b?u.redraw():(b=2,u.redraw.sync())}};return void(o.view||"function"==typeof o?(o={},l(s)):o.onmatch?m.then((function(){return o.onmatch(r.params,t,a)})).then(l,t===f?null:i):l("div"))}if(t===f)throw new Error("Could not resolve default route "+f+".");E(f,null,{replace:!0})}(0)}function O(){g||(g=!0,y(S))}function E(e,t,n){if(e=r(e,t),w){O();var i=n?n.state:null,o=n?n.title:null;n&&n.replace?l.history.replaceState(i,o,M.prefix+e):l.history.pushState(i,o,M.prefix+e)}else l.location.href=M.prefix+e}function M(e,t,r){if(!e)throw new TypeError("DOM element being rendered to does not exist.");if(c=Object.keys(r).map((function(e){if("/"!==e[0])throw new SyntaxError("Routes must start with a '/'.");if(/:([^\/\.-]+)(\.{3})?:/.test(e))throw new SyntaxError("Route parameter names must be separated with either '/', '.', or '-'.");return{route:e,component:r[e],check:i(e)}})),f=t,null!=t){var o=n(t);if(!c.some((function(e){return e.check(o)})))throw new ReferenceError("Default route doesn't match any known routes.")}"function"==typeof l.history.pushState?l.addEventListener("popstate",O,!1):"#"===M.prefix[0]&&l.addEventListener("hashchange",S,!1),w=!0,u.mount(e,_),S()}return M.set=function(e,t,r){null!=p&&((r=r||{}).replace=!0),p=null,E(e,t,r)},M.get=function(){return h},M.prefix="#!",M.Link={view:function(e){var n,i,a,s=t(e.attrs.selector||"a",o(e.attrs,["options","params","selector","onclick"]),e.children);return(s.attrs.disabled=Boolean(s.attrs.disabled))?(s.attrs.href=null,s.attrs["aria-disabled"]="true"):(n=e.attrs.options,i=e.attrs.onclick,a=r(s.attrs.href,e.attrs.params),s.attrs.href=M.prefix+a,s.attrs.onclick=function(e){var t;"function"==typeof i?t=i.call(e.currentTarget,e):null==i||"object"!=typeof i||"function"==typeof i.handleEvent&&i.handleEvent(e),!1===t||e.defaultPrevented||0!==e.button&&0!==e.which&&1!==e.which||e.currentTarget.target&&"_self"!==e.currentTarget.target||e.ctrlKey||e.metaKey||e.shiftKey||e.altKey||(e.preventDefault(),e.redraw=!1,M.set(a,null,n))}),s}},M.param=function(e){return v&&null!=e?v[e]:v},M},$}()("undefined"!=typeof window?window:null,e),F}var de=function(){if(H)return G;H=1;var e=Y(),t=ae(),r=re(),n=Z(),i=function(){return e.apply(this,arguments)};return i.m=e,i.trust=e.trust,i.fragment=e.fragment,i.Fragment="[",i.mount=r.mount,i.route=fe(),i.render=te(),i.redraw=r.redraw,i.request=t.request,i.parseQueryString=se(),i.buildQueryString=ne(),i.parsePathname=le(),i.buildPathname=ie(),i.vnode=W(),i.censor=ce(),i.domFor=n.domFor,G=i}(),ve=B(de);function he(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;class pe{constructor(e="http://localhost:5000/api/aggregation/status"){this._baseUrl=e}getClientStatuses(){return he(this,void 0,void 0,(function*(){return yield ve.request({method:"GET",url:this._baseUrl,withCredentials:!0})}))}getClientStatus(e){return he(this,void 0,void 0,(function*(){return yield ve.request({method:"GET",url:this._baseUrl,params:{sessionId:e},withCredentials:!0})}))}}class ye{constructor(e="http://localhost:5000/api/aggregation/config/"){this._baseUrl=e}getClientConfigs(){return he(this,void 0,void 0,(function*(){return yield ve.request({method:"GET",url:this._baseUrl+"client",withCredentials:!0})}))}getClientConfig(e){return he(this,void 0,void 0,(function*(){return yield ve.request({method:"GET",url:this._baseUrl+"client/"+e,withCredentials:!0})}))}getClientChannels(e){return he(this,void 0,void 0,(function*(){return yield ve.request({method:"GET",url:this._baseUrl+"client/"+e+"/channel"})}))}getChannel(e){return he(this,void 0,void 0,(function*(){return yield ve.request({method:"GET",url:this._baseUrl+"client/channel/"+e})}))}}class me{view(){return ve("nav",{class:"border-b overflow-hidden p-2 border-gray-400 mx-auto w-full max-w-screen-xl"},ve("div",{class:"flex items-center"},[ve(ve.route.Link,{class:"font-sans antialiased text-xl text-current mx-2 block py-1 font-semibold",href:"/status"},"UA Aggregation"),ve("div",{class:"ml-auto mr-2 block"},[ve("ul",{class:"m-2 flex flex-row gap-x-3 gap-y-1 m-0 items-center"},[ve("li",ve(ve.route.Link,{class:"font-sans antialiased text-xl text-current p-1 hover:text-primary",href:"/status"},"Status")),ve("li",ve(ve.route.Link,{class:"font-sans antialiased text-xl text-current p-1 hover:text-primary",href:"/config/uaclient"},"Config"))])])]))}}class ge{view(){return ve("footer",{class:"border-t overflow-hidden p-2 border-gray-400 mx-auto w-full max-w-screen-xl"},ve("p",{class:"font-sans antialiased text-base text-current text-center"},"OPC UA Aggregation Client"))}}const we=document.getElementById("header"),be=document.getElementById("footer");class xe{oninit(){ve.mount(we,me),ve.mount(be,ge)}view(e){return ve("div",{class:"w-full max-w-screen-xl"},e.children)}}const _e={view:e=>ve("div",{class:"m-2 p-2 overflow-hidden rounded-lg border border-gray-400"},e.children)},ke={view:e=>{var t,r,n,i,o;return ve("dl",{class:"w-sm divide-y divide-gray-400"},[ve("div",{class:"flex flex-col pb-3"},[ve("dt",{class:"mb-1 text-lg text-gray-400"},"Session ID: "),ve("dd",{class:"text-lg font-semibold"},null===(t=e.attrs.config)||void 0===t?void 0:t.id)]),ve("div",{class:"flex flex-col pb-3"},[ve("dt",{class:"mb-1 text-lg text-gray-400"},"Session Name: "),ve("dd",{class:"text-lg font-semibold"},null===(r=e.attrs.config)||void 0===r?void 0:r.sessionName)]),ve("div",{class:"flex flex-col pb-3"},[ve("dt",{class:"mb-1 text-lg text-gray-400"},"Session URI: "),ve("dd",{class:"text-lg font-semibold"},null===(n=e.attrs.config)||void 0===n?void 0:n.serverUri)]),ve("div",{class:"flex flex-col pb-3"},[ve("dt",{class:"mb-1 text-lg text-gray-400"},"Description: "),ve("dd",{class:"text-lg font-semibold"},null===(i=e.attrs.config)||void 0===i?void 0:i.description)]),ve("div",{class:"flex flex-col pb-3"},[ve("dt",{class:"mb-1 text-lg text-gray-400"},"Enabled: "),ve("dd",{class:"text-lg font-semibold"},(null===(o=e.attrs.config)||void 0===o?void 0:o.enabled)?"Enabledd":"Disabld")])])}},Se={view:e=>{var t,r,n;return ve("dl",{class:"w-sm divide-y divide-gray-400"},[ve("div",{class:"flex flex-col pb-3"},[ve("dt",{class:"mb-1 text-lg text-gray-400"},"Keep Alive Interval: "),ve("dd",{class:"text-lg font-semibold"},null===(t=e.attrs.config)||void 0===t?void 0:t.keepAliveInterval)]),ve("div",{class:"flex flex-col pb-3"},[ve("dt",{class:"mb-1 text-lg text-gray-400"},"Reconnect Period: "),ve("dd",{class:"text-lg font-semibold"},null===(r=e.attrs.config)||void 0===r?void 0:r.reconnectPeriod)]),ve("div",{class:"flex flex-col pb-3"},[ve("dt",{class:"mb-1 text-lg text-gray-400"},"Session Lifetime: "),ve("dd",{class:"text-lg font-semibold"},null===(n=e.attrs.config)||void 0===n?void 0:n.sessionLifetime)])])}},Oe={view:e=>ve("tr",{class:"border-b border-gray-400 last:border-0"},[ve("td",{class:"p-3"},e.attrs.channel.nodeId),ve("td",{class:"p-3"},e.attrs.channel.name),ve("td",{class:"p-3"},e.attrs.channel.description),ve("td",{class:"p-3"},e.attrs.channel.id)])},Ee={view:e=>{var t;return ve("table",{class:"w-full"},[ve("thead",{class:"border-b border-gray-400 bg-gray-400 text-gray-900 text-sm font-medium"},ve("tr",[ve("th",{class:"px-2.5 py-2 text-start font-medium"},"Node Id"),ve("th",{class:"px-2.5 py-2 text-start font-medium"},"Name"),ve("th",{class:"px-2.5 py-2 text-start font-medium"},"Description"),ve("th",{class:"px-2.5 py-2 text-start font-medium"},"")])),ve("tbody",{class:"text-sm"},null===(t=e.attrs.channels)||void 0===t?void 0:t.map((e=>ve(Oe,{channel:e}))))])}};var Me,Ce={};
/*! *****************************************************************************
	Copyright (C) Microsoft. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */!function(){return Me||(Me=1,function(e){!function(){var t="object"==typeof globalThis?globalThis:"object"==typeof V?V:"object"==typeof self?self:"object"==typeof this?this:function(){try{return Function("return this;")()}catch(e){}}()||function(){try{return(0,eval)("(function() { return this; })()")}catch(e){}}(),r=n(e);function n(e,t){return function(r,n){Object.defineProperty(e,r,{configurable:!0,writable:!0,value:n}),t&&t(r,n)}}void 0!==t.Reflect&&(r=n(t.Reflect,r)),function(e,t){var r=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,i=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",a="function"==typeof Object.create,s={__proto__:[]}instanceof Array,l=!a&&!s,u={create:a?function(){return fe(Object.create(null))}:s?function(){return fe({__proto__:null})}:function(){return fe({})},has:l?function(e,t){return r.call(e,t)}:function(e,t){return t in e},get:l?function(e,t){return r.call(e,t)?e[t]:void 0}:function(e,t){return e[t]}},c=Object.getPrototypeOf(Function),f="function"==typeof Map&&"function"==typeof Map.prototype.entries?Map:le(),d="function"==typeof Set&&"function"==typeof Set.prototype.entries?Set:ue(),v="function"==typeof WeakMap?WeakMap:ce(),h=n?Symbol.for("@reflect-metadata:registry"):void 0,p=ie(),y=oe(p);function m(e,t,r,n){if(N(r)){if(!V(e))throw new TypeError;if(!W(t))throw new TypeError;return M(e,t)}if(!V(e))throw new TypeError;if(!$(t))throw new TypeError;if(!$(n)&&!N(n)&&!U(n))throw new TypeError;return U(n)&&(n=void 0),C(e,t,r=H(r),n)}function g(e,t){function r(r,n){if(!$(r))throw new TypeError;if(!N(n)&&!J(n))throw new TypeError;A(e,t,r,n)}return r}function w(e,t,r,n){if(!$(r))throw new TypeError;return N(n)||(n=H(n)),A(e,t,r,n)}function b(e,t,r){if(!$(t))throw new TypeError;return N(r)||(r=H(r)),T(e,t,r)}function x(e,t,r){if(!$(t))throw new TypeError;return N(r)||(r=H(r)),j(e,t,r)}function _(e,t,r){if(!$(t))throw new TypeError;return N(r)||(r=H(r)),I(e,t,r)}function k(e,t,r){if(!$(t))throw new TypeError;return N(r)||(r=H(r)),P(e,t,r)}function S(e,t){if(!$(e))throw new TypeError;return N(t)||(t=H(t)),D(e,t)}function O(e,t){if(!$(e))throw new TypeError;return N(t)||(t=H(t)),R(e,t)}function E(e,t,r){if(!$(t))throw new TypeError;if(N(r)||(r=H(r)),!$(t))throw new TypeError;N(r)||(r=H(r));var n=se(t,r,!1);return!N(n)&&n.OrdinaryDeleteMetadata(e,t,r)}function M(e,t){for(var r=e.length-1;r>=0;--r){var n=(0,e[r])(t);if(!N(n)&&!U(n)){if(!W(n))throw new TypeError;t=n}}return t}function C(e,t,r,n){for(var i=e.length-1;i>=0;--i){var o=(0,e[i])(t,r,n);if(!N(o)&&!U(o)){if(!$(o))throw new TypeError;n=o}}return n}function T(e,t,r){if(j(e,t,r))return!0;var n=re(t);return!U(n)&&T(e,n,r)}function j(e,t,r){var n=se(t,r,!1);return!N(n)&&K(n.OrdinaryHasOwnMetadata(e,t,r))}function I(e,t,r){if(j(e,t,r))return P(e,t,r);var n=re(t);return U(n)?void 0:I(e,n,r)}function P(e,t,r){var n=se(t,r,!1);if(!N(n))return n.OrdinaryGetOwnMetadata(e,t,r)}function A(e,t,r,n){se(r,n,!0).OrdinaryDefineOwnMetadata(e,t,r,n)}function D(e,t){var r=R(e,t),n=re(e);if(null===n)return r;var i=D(n,t);if(i.length<=0)return r;if(r.length<=0)return i;for(var o=new d,a=[],s=0,l=r;s<l.length;s++){var u=l[s];o.has(u)||(o.add(u),a.push(u))}for(var c=0,f=i;c<f.length;c++){u=f[c];o.has(u)||(o.add(u),a.push(u))}return a}function R(e,t){var r=se(e,t,!1);return r?r.OrdinaryOwnMetadataKeys(e,t):[]}function z(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function N(e){return void 0===e}function U(e){return null===e}function L(e){return"symbol"==typeof e}function $(e){return"object"==typeof e?null!==e:"function"==typeof e}function q(e,t){switch(z(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var r="string",n=X(e,i);if(void 0!==n){var o=n.call(e,r);if($(o))throw new TypeError;return o}return F(e)}function F(e,t){var r,n,i=e.toString;if(B(i)&&!$(n=i.call(e)))return n;if(B(r=e.valueOf)&&!$(n=r.call(e)))return n;throw new TypeError}function K(e){return!!e}function G(e){return""+e}function H(e){var t=q(e);return L(t)?t:G(t)}function V(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function B(e){return"function"==typeof e}function W(e){return"function"==typeof e}function J(e){switch(z(e)){case 3:case 4:return!0;default:return!1}}function Q(e,t){return e===t||e!=e&&t!=t}function X(e,t){var r=e[t];if(null!=r){if(!B(r))throw new TypeError;return r}}function Y(e){var t=X(e,o);if(!B(t))throw new TypeError;var r=t.call(e);if(!$(r))throw new TypeError;return r}function Z(e){return e.value}function ee(e){var t=e.next();return!t.done&&t}function te(e){var t=e.return;t&&t.call(e)}function re(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===c)return t;if(t!==c)return t;var r=e.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return t;var i=n.constructor;return"function"!=typeof i||i===e?t:i}function ne(){var e,r,n,i;N(h)||void 0===t.Reflect||h in t.Reflect||"function"!=typeof t.Reflect.defineMetadata||(e=ae(t.Reflect));var o=new v,a={registerProvider:s,getProvider:u,setProvider:p};return a;function s(t){if(!Object.isExtensible(a))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case e===t:break;case N(r):r=t;break;case r===t:break;case N(n):n=t;break;case n===t:break;default:void 0===i&&(i=new d),i.add(t)}}function l(t,o){if(!N(r)){if(r.isProviderFor(t,o))return r;if(!N(n)){if(n.isProviderFor(t,o))return r;if(!N(i))for(var a=Y(i);;){var s=ee(a);if(!s)return;var l=Z(s);if(l.isProviderFor(t,o))return te(a),l}}}if(!N(e)&&e.isProviderFor(t,o))return e}function u(e,t){var r,n=o.get(e);return N(n)||(r=n.get(t)),N(r)?(N(r=l(e,t))||(N(n)&&(n=new f,o.set(e,n)),n.set(t,r)),r):r}function c(e){if(N(e))throw new TypeError;return r===e||n===e||!N(i)&&i.has(e)}function p(e,t,r){if(!c(r))throw new Error("Metadata provider not registered.");var n=u(e,t);if(n!==r){if(!N(n))return!1;var i=o.get(e);N(i)&&(i=new f,o.set(e,i)),i.set(t,r)}return!0}}function ie(){var e;return!N(h)&&$(t.Reflect)&&Object.isExtensible(t.Reflect)&&(e=t.Reflect[h]),N(e)&&(e=ne()),!N(h)&&$(t.Reflect)&&Object.isExtensible(t.Reflect)&&Object.defineProperty(t.Reflect,h,{enumerable:!1,configurable:!1,writable:!1,value:e}),e}function oe(e){var t=new v,r={isProviderFor:function(e,r){var n=t.get(e);return!N(n)&&n.has(r)},OrdinaryDefineOwnMetadata:a,OrdinaryHasOwnMetadata:i,OrdinaryGetOwnMetadata:o,OrdinaryOwnMetadataKeys:s,OrdinaryDeleteMetadata:l};return p.registerProvider(r),r;function n(n,i,o){var a=t.get(n),s=!1;if(N(a)){if(!o)return;a=new f,t.set(n,a),s=!0}var l=a.get(i);if(N(l)){if(!o)return;if(l=new f,a.set(i,l),!e.setProvider(n,i,r))throw a.delete(i),s&&t.delete(n),new Error("Wrong provider for target.")}return l}function i(e,t,r){var i=n(t,r,!1);return!N(i)&&K(i.has(e))}function o(e,t,r){var i=n(t,r,!1);if(!N(i))return i.get(e)}function a(e,t,r,i){n(r,i,!0).set(e,t)}function s(e,t){var r=[],i=n(e,t,!1);if(N(i))return r;for(var o=Y(i.keys()),a=0;;){var s=ee(o);if(!s)return r.length=a,r;var l=Z(s);try{r[a]=l}catch(e){try{te(o)}finally{throw e}}a++}}function l(e,r,i){var o=n(r,i,!1);if(N(o))return!1;if(!o.delete(e))return!1;if(0===o.size){var a=t.get(r);N(a)||(a.delete(i),0===a.size&&t.delete(a))}return!0}}function ae(e){var t=e.defineMetadata,r=e.hasOwnMetadata,n=e.getOwnMetadata,i=e.getOwnMetadataKeys,o=e.deleteMetadata,a=new v;return{isProviderFor:function(e,t){var r=a.get(e);return!(N(r)||!r.has(t))||!!i(e,t).length&&(N(r)&&(r=new d,a.set(e,r)),r.add(t),!0)},OrdinaryDefineOwnMetadata:t,OrdinaryHasOwnMetadata:r,OrdinaryGetOwnMetadata:n,OrdinaryOwnMetadataKeys:i,OrdinaryDeleteMetadata:o}}function se(e,t,r){var n=p.getProvider(e,t);if(!N(n))return n;if(r){if(p.setProvider(e,t,y))return y;throw new Error("Illegal state.")}}function le(){var e={},t=[],r=function(){function e(e,t,r){this._index=0,this._keys=e,this._values=t,this._selector=r}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var r=this._find(e,!0);return this._values[r]=t,this},t.prototype.delete=function(t){var r=this._find(t,!1);if(r>=0){for(var n=this._keys.length,i=r+1;i<n;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,Q(t,this._cacheKey)&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new r(this._keys,this._values,n)},t.prototype.values=function(){return new r(this._keys,this._values,i)},t.prototype.entries=function(){return new r(this._keys,this._values,a)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){if(!Q(this._cacheKey,e)){this._cacheIndex=-1;for(var r=0;r<this._keys.length;r++)if(Q(this._keys[r],e)){this._cacheIndex=r;break}}return this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function n(e,t){return e}function i(e,t){return t}function a(e,t){return[e,t]}}function ue(){return function(){function e(){this._map=new f}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.keys()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}()}function ce(){var e=16,t=u.create(),n=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=o(e,!1);return void 0!==t&&u.has(t,this._key)},e.prototype.get=function(e){var t=o(e,!1);return void 0!==t?u.get(t,this._key):void 0},e.prototype.set=function(e,t){return o(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=o(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var e;do{e="@@WeakMap@@"+l()}while(u.has(t,e));return t[e]=!0,e}function o(e,t){if(!r.call(e,n)){if(!t)return;Object.defineProperty(e,n,{value:u.create()})}return e[n]}function a(e,t){for(var r=0;r<t;++r)e[r]=255*Math.random()|0;return e}function s(e){if("function"==typeof Uint8Array){var t=new Uint8Array(e);return"undefined"!=typeof crypto?crypto.getRandomValues(t):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(t):a(t,e),t}return a(new Array(e),e)}function l(){var t=s(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var r="",n=0;n<e;++n){var i=t[n];4!==n&&6!==n&&8!==n||(r+="-"),i<16&&(r+="0"),r+=i.toString(16).toLowerCase()}return r}}function fe(e){return e.__=void 0,delete e.__,e}e("decorate",m),e("metadata",g),e("defineMetadata",w),e("hasMetadata",b),e("hasOwnMetadata",x),e("getMetadata",_),e("getOwnMetadata",k),e("getMetadataKeys",S),e("getOwnMetadataKeys",O),e("deleteMetadata",E)}(r,t),void 0===t.Reflect&&(t.Reflect=e)}()}(e||(e={}))),Ce;var e}();class Te{constructor(){this.services=new Map}static getInstance(){return Te.instance||(Te.instance=new Te),Te.instance}register(e,t){this.services.set(e,t)}resolve(e){const t=this.services.get(e);if(!t)throw new Error(`Service ${e} not found`);if("function"==typeof t&&!t.prototype)return t();if("function"==typeof t){return new t(...this.getDependencies(t))}return t}getDependencies(e){return(Reflect.getMetadata("design:paramtypes",e)||[]).map((e=>this.resolve(e.name)))}}const je=Te.getInstance();class Ie{constructor(){this.configModel=je.resolve("ConfigDetailsPageModel")}oninit(e){return he(this,void 0,void 0,(function*(){yield this.configModel.load(e.attrs.id),yield this.configModel.loadChannels()}))}view(e){var t;return ve("div",[ve("div",{class:"flex flex-wrap"},[ve(_e,ve(ke,{config:this.configModel.current})),ve(_e,ve(Se,{config:this.configModel.current}))]),ve("div",{class:"flex flex-col"},[ve(_e,ve(Ee,{channels:null===(t=this.configModel.current)||void 0===t?void 0:t.channels}))])])}}const Pe={view:e=>{var t,r,n,i,o;return ve("tr",{class:"border-b border-gray-400 last:border-0"},[ve("td",{class:"p-3"},null===(t=e.attrs.config)||void 0===t?void 0:t.sessionName),ve("td",{class:"p-3"},null===(r=e.attrs.config)||void 0===r?void 0:r.serverUri),ve("td",{class:"p-3"},null===(n=e.attrs.config)||void 0===n?void 0:n.description),ve("td",{class:"p-3"},(null===(i=e.attrs.config)||void 0===i?void 0:i.enabled)?"Enabled":"Disabled"),ve("td",{class:"p-3"},ve(ve.route.Link,{class:"font-sans antialiased text-sm text-current font-medium hover:text-primary",href:"/config/uaclient/"+(null===(o=e.attrs.config)||void 0===o?void 0:o.id)},"Details"))])}},Ae={view:e=>{var t;return ve("table",{class:"w-full"},[ve("thead",{class:"border-b border-gray-400 bg-gray-400 text-gray-900 text-sm font-medium"},[ve("tr",[ve("th",{class:"px-2.5 py-2 text-start font-medium"},"Name"),ve("th",{class:"px-2.5 py-2 text-start font-medium"},"Server Uri"),ve("th",{class:"px-2.5 py-2 text-start font-medium"},"Description"),ve("th",{class:"px-2.5 py-2 text-start font-medium"},"Enabled"),ve("th",{class:"px-2.5 py-2 text-start font-medium"},"Details")])]),ve("tbody",{class:"group text-sm"},null===(t=e.attrs.configs)||void 0===t?void 0:t.map((e=>ve(Pe,{config:e}))))])}};class De{view(e){return ve("div",{class:"m-1 p-1 flex flex-row justify-end items-center"},e.children)}}class Re{constructor(){this.variants={default:"border-gray-200 text-gray-200 hover:text-gray-900 hover:bg-gray-400 focus:ring-gray-600",green:"border-green-400 text-green-400 hover:text-gray-900 hover:bg-green-400 focus:ring-green-600",red:"border-red-400 text-red-400 hover:text-gray-900 hover:bg-red-400 focus:ring-red-600",yellow:"border-yellow-400 text-yellow-400 hover:text-gray-900 hover:bg-yellow-400 focus:ring-yellow-600"}}view(e){var t,r;return ve("button",{class:"border px-5 py-2 mr-2 text-sm rounded-lg focus:ring-4 font-medium text-center focus:outline-none "+this.variants[null!==(t=e.attrs.variant)&&void 0!==t?t:"default"],onclick:e.attrs.onclick,type:null!==(r=e.attrs.type)&&void 0!==r?r:"button"},e.attrs.label)}}class ze{view(e){const{isOpen:t,onClose:r}=e.attrs;return t?ve("div",{onclick:r,class:"fixed inset-0 bg-gray-950/50  flex justify-center items-center"},ve("div",{class:"bg-gray-800 p-2 rounded-lg max-w-md w-full",onclick:e=>e.stopPropagation()},e.children)):null}}class Ne{constructor(e,t,r,n,i,o){this.name=e,this.label=t,this.type=r,this.placeholder=n,this.required=i,this.validation=o,this.value="",this.error="",this.isTouched=!1}setValue(e){this.value=e,this.isTouched=!0,this.validate()}validate(){if(this.required&&!this.value)return this.error="This field is required.",!1;if(this.validation){const e=this.validation(this.value);if(e)return this.error=e,!1}return this.error="",!0}isValid(){return!this.error}}class Ue{constructor(e){this.fields=[],this.fields=e.map((e=>new Ne(e.name,e.label,e.type,e.placeholder,e.required,e.validation)))}validate(){return this.fields.every((e=>e.validate()))}getFormData(){return this.fields.reduce(((e,t)=>(e[t.name]=t.value,e)),{})}isValid(){return this.fields.every((e=>e.isValid()))}}class Le{constructor(e){this.onSubmit=e=>{e.preventDefault(),this.formModel.validate()?this.attrs.onSubmit(this.formModel.getFormData()):ve.redraw()},this.attrs=e.attrs,this.formModel=new Ue(this.attrs.configs)}view(e){return ve("form",{onsubmit:this.onSubmit,class:"max-w-md mx-auto p-2 rounded-lg"},this.formModel.fields.map((e=>ve("div",{class:"mb-4"},[ve("label",{class:"block text-sm font-bold"},e.label),"textarea"===e.type?ve("textarea",{class:"mt-1 block w-full p-2 border border-gray-400 rounded-md",placeholder:e.placeholder,value:e.value,oninput:t=>{e.setValue(t.target.value)}}):ve("input",{class:"form-input mt-1 p-2 block w-full border border-gray-400 rounded-md",type:e.type,placeholder:e.placeholder,value:e.value,oninput:t=>{e.setValue(t.target.value)}}),e.error&&ve("p",{class:"text-red-500 text-xs italic"},e.error)]))),ve(De,[ve(Re,{type:"submit",label:"Submit"})]))}}const $e=[{name:"sessionName",label:"Session Name",type:"text",placeholder:"Session name",required:!0},{name:"sessionUri",label:"Session URI",type:"text",placeholder:"Session URI",required:!0},{name:"description",label:"Description",type:"text",placeholder:"Description",required:!0},{name:"keepAliveInterval",label:"Keep Alive Interval",type:"number",placeholder:"Keep Alive Interval",required:!0}];class qe{constructor(){this.isModalOpen=!1,this.toggleModal=()=>{this.isModalOpen=!this.isModalOpen,ve.redraw()},this.addClient=e=>he(this,void 0,void 0,(function*(){alert("Add client"),this.toggleModal()}))}oninit(){return he(this,void 0,void 0,(function*(){this.configModel=je.resolve("ConfigPageModel"),yield this.configModel.load()}))}view(){return ve("div",{class:"flex flex-col"},[ve(De,[ve(Re,{onclick:this.toggleModal,label:"Add Client"})]),ve(_e,ve(Ae,{configs:this.configModel.list})),ve(ze,{isOpen:this.isModalOpen,onClose:this.toggleModal},[ve(Le,{onSubmit:this.addClient,configs:$e})])])}}const Fe=e=>new Date(e).toLocaleDateString("ru-RU",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),Ke=e=>0===e?"Good":"Bad",Ge={view:e=>ve("tr",{class:"border-b border-gray-400 last:border-0"},[ve("td",{class:"p-3"},e.attrs.item.tagId),ve("td",{class:"p-3"},e.attrs.item.aggregationTag.value),ve("td",{class:"p-3"},Fe(e.attrs.item.aggregationTag.timestamp)),ve("td",{class:"p-3"},Ke(e.attrs.item.aggregationTag.statusCode))])},He={view:e=>{var t;return ve("table",{class:"w-full"},[ve("thead",{class:"border-b border-gray-400 bg-gray-400 text-gray-900 text-sm font-medium"},ve("tr",[ve("th",{class:"px-2.5 py-2 text-start font-medium"},"Node Id"),ve("th",{class:"px-2.5 py-2 text-start font-medium"},"Value"),ve("th",{class:"px-2.5 py-2 text-start font-medium"},"Timestamp"),ve("th",{class:"px-2.5 py-2 text-start font-medium"},"Quality")])),ve("tbody",{class:"group text-sm"},null===(t=e.attrs.items)||void 0===t?void 0:t.map((e=>ve(Ge,{item:e}))))])}},Ve={view:e=>{var t,r,n,i;return ve("dl",{class:"w-sm divide-y divide-gray-400"},[ve("div",{class:"flex flex-col pb-3"},[ve("dt",{class:"mb-1 text-lg text-gray-400"},"Session ID: "),ve("dd",{class:"text-lg font-semibold"},null===(t=e.attrs.status)||void 0===t?void 0:t.id)]),ve("div",{class:"flex flex-col pb-3"},[ve("dt",{class:"mb-1 text-lg text-gray-400"},"Session Name: "),ve("dd",{class:"text-lg font-semibold"},null===(r=e.attrs.status)||void 0===r?void 0:r.sessionName)]),ve("div",{class:"flex flex-col pb-3"},[ve("dt",{class:"mb-1 text-lg text-gray-400"},"Session URI: "),ve("dd",{class:"text-lg font-semibold"},null===(n=e.attrs.status)||void 0===n?void 0:n.serverUri)]),ve("div",{class:"flex flex-col pb-3"},[ve("dt",{class:"mb-1 text-lg text-gray-400"},"Connect Error: "),ve("dd",{class:"text-lg font-semibold"},null===(i=e.attrs.status)||void 0===i?void 0:i.connectError)])])}};class Be{constructor(){this._statusDetailsModel=je.resolve("StatusDetailsPageModel")}oninit(e){return he(this,void 0,void 0,(function*(){yield this._statusDetailsModel.load(e.attrs.id)}))}view(e){var t;return ve("div",[ve("div",{class:"flex flex-wrap"},[ve(_e,ve(Ve,{status:this._statusDetailsModel.current}))]),ve("div",{class:"flex flex-col"},[ve(_e,ve(He,{items:null===(t=this._statusDetailsModel.current)||void 0===t?void 0:t.monitoredItems}))])])}}const We={view:e=>{var t,r,n,i;return ve("tr",{class:"border-b border-gray-400 last:border-0"},[ve("td",{class:"p-3"},null===(t=e.attrs.status)||void 0===t?void 0:t.sessionName),ve("td",{class:"p-3"},null===(r=e.attrs.status)||void 0===r?void 0:r.serverUri),ve("td",{class:"p-3"},null===(n=e.attrs.status)||void 0===n?void 0:n.connectError),ve("td",{class:"p-3"},ve(ve.route.Link,{class:"font-sans antialiased text-sm text-current font-medium hover:text-primary",href:"/status/"+(null===(i=e.attrs.status)||void 0===i?void 0:i.id)},"Details"))])}},Je={view:e=>{var t;return ve("table",{class:"w-full"},[ve("thead",{class:"border-b border-gray-400 bg-gray-400 text-gray-900 text-sm font-medium"},[ve("tr",[ve("th",{class:"px-2.5 py-2 text-start font-medium"},"Name"),ve("th",{class:"px-2.5 py-2 text-start font-medium"},"Server Uri"),ve("th",{class:"px-2.5 py-2 text-start font-medium"},"Connect Error"),ve("th",{class:"px-2.5 py-2 text-start font-medium"},"Monitored Items")])]),ve("tbody",{class:"group text-sm"},null===(t=e.attrs.statuses)||void 0===t?void 0:t.map((e=>ve(We,{status:e}))))])}};class Qe{oninit(){return he(this,void 0,void 0,(function*(){this.statusModel=je.resolve("StatusPageModel"),yield this.statusModel.load()}))}view(){return ve("div",{class:"flex flex-col"},[ve(_e,ve(Je,{statuses:this.statusModel.list}))])}}const Xe=document.getElementById("content"),Ye="http://192.168.122.114:5000/api/aggregation";je.register("IClientStatusService",(()=>new pe(Ye+"/status"))),je.register("IClientConfigService",(()=>new ye(Ye+"/config/"))),je.register("StatusPageModel",class{constructor(){this._service=je.resolve("IClientStatusService")}load(){return he(this,void 0,void 0,(function*(){var e;this.list=yield null===(e=this._service)||void 0===e?void 0:e.getClientStatuses()}))}}),je.register("StatusDetailsPageModel",class{constructor(){this._service=je.resolve("IClientStatusService")}load(e){return he(this,void 0,void 0,(function*(){this.current=yield this._service.getClientStatus(e)}))}}),je.register("ConfigPageModel",class{constructor(){this._service=je.resolve("IClientConfigService")}load(){return he(this,void 0,void 0,(function*(){var e;this.list=yield null===(e=this._service)||void 0===e?void 0:e.getClientConfigs()}))}}),je.register("ConfigDetailsPageModel",class{constructor(){this._service=je.resolve("IClientConfigService")}load(e){return he(this,void 0,void 0,(function*(){this.current=yield this._service.getClientConfig(e)}))}loadChannels(){return he(this,void 0,void 0,(function*(){this.current&&(this.current.channels=yield this._service.getClientChannels(this.current.id))}))}});const Ze={"/status":{render:()=>ve(xe,ve(Qe))},"/status/:key":{render:e=>ve(xe,ve(Be,{id:e.attrs.key}))},"/config/uaclient":{render:()=>ve(xe,ve(qe))},"/config/uaclient/:key":{render:e=>ve(xe,ve(Ie,{id:e.attrs.key}))}};ve.route(Xe,"/status",Ze)}();

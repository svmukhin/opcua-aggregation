!function(){"use strict";var e,t,n,r,i,o,a,s,l,u,c,f,d,h,v,p,y,m,g,w,b,x,_,k,S,O,E,C,T,j,I,M,P,A,R,z,N,U,D,L,q,$,F,K,G,V,H="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function B(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function W(){if(t)return e;function n(e,t,n,r,i,o){return{tag:e,key:t,attrs:n,children:r,text:i,dom:o,domSize:void 0,state:void 0,events:void 0,instance:void 0}}return t=1,n.normalize=function(e){return Array.isArray(e)?n("[",void 0,void 0,n.normalizeChildren(e),void 0,void 0):null==e||"boolean"==typeof e?null:"object"==typeof e?e:n("#",void 0,void 0,String(e),void 0,void 0)},n.normalizeChildren=function(e){var t=[];if(e.length){for(var r=null!=e[0]&&null!=e[0].key,i=1;i<e.length;i++)if((null!=e[i]&&null!=e[i].key)!==r)throw new TypeError(!r||null==e[i]&&"boolean"!=typeof e[i]?"In fragments, vnodes must either all have keys or none have keys.":"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.");for(i=0;i<e.length;i++)t[i]=n.normalize(e[i])}return t},e=n}function J(){if(r)return n;r=1;var e=W();return n=function(){var t,n=arguments[this],r=this+1;if(null==n?n={}:("object"!=typeof n||null!=n.tag||Array.isArray(n))&&(n={},r=this),arguments.length===r+1)t=arguments[r],Array.isArray(t)||(t=[t]);else for(t=[];r<arguments.length;)t.push(arguments[r++]);return e("",n.key,n,t)},n}function Q(){return o?i:(o=1,i={}.hasOwnProperty)}function X(){if(s)return a;s=1;var e=W(),t=J(),n=Q(),r=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,i=Object.create(null);function o(e){for(var t,o="div",a=[],s={};t=r.exec(e);){var l=t[1],u=t[2];if(""===l&&""!==u)o=u;else if("#"===l)s.id=u;else if("."===l)a.push(u);else if("["===t[3][0]){var c=t[6];c&&(c=c.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===t[4]?a.push(c):s[t[4]]=""===c?c:c||!0}}return a.length>0&&(s.className=a.join(" ")),function(e){for(var t in e)if(n.call(e,t))return!1;return!0}(s)&&(s=null),i[e]={tag:o,attrs:s}}return a=function(r){if(null==r||"string"!=typeof r&&"function"!=typeof r&&"function"!=typeof r.view)throw Error("The selector must be either a string or a component.");var a=t.apply(1,arguments);return"string"==typeof r&&(a.children=e.normalizeChildren(a.children),"["!==r)?function(e,t){var r=t.attrs,i=n.call(r,"class"),o=i?r.class:r.className;return t.tag=e.tag,null!=e.attrs?(r=Object.assign({},e.attrs,r),null==o&&null==e.attrs.className||(r.className=null!=o?null!=e.attrs.className?String(e.attrs.className)+" "+String(o):o:null!=e.attrs.className?e.attrs.className:null)):null!=o&&(r.className=o),i&&(r.class=null),"input"===e.tag&&n.call(r,"type")&&(r=Object.assign({type:r.type},r)),t.attrs=r,t}(i[r]||o(r),a):(a.tag=r,a)},a}function Y(){if(h)return d;h=1;var e=X();return e.trust=function(){if(u)return l;u=1;var e=W();return l=function(t){return null==t&&(t=""),e("<",void 0,void 0,t,void 0,void 0)}}(),e.fragment=function(){if(f)return c;f=1;var e=W(),t=J();return c=function(){var n=t.apply(0,arguments);return n.tag="[",n.children=e.normalizeChildren(n.children),n},c}(),d=e}function Z(){if(p)return v;p=1;var e=new WeakMap;return v={delayedRemoval:e,domFor:function*(t,n={}){var r=t.dom,i=t.domSize,o=n.generation;if(null!=r)do{var a=r.nextSibling;e.get(r)===o&&(yield r,i--),r=a}while(i)}},v}function ee(){if(m)return y;m=1;var e=W(),t=Z(),n=t.delayedRemoval,r=t.domFor;return y=function(){var t,i,o={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function a(e){return e.ownerDocument}function s(e){return e.attrs&&e.attrs.xmlns||o[e.tag]}function l(e,t){if(e.state!==t)throw new Error("'vnode.state' must not be modified.")}function u(e){var t=e.state;try{return this.apply(t,arguments)}finally{l(e,t)}}function c(e){try{return a(e).activeElement}catch(e){return null}}function f(e,t,n,r,i,o,a){for(var s=n;s<r;s++){var l=t[s];null!=l&&d(e,l,i,a,o)}}function d(t,n,r,i,o){var l=n.tag;if("string"==typeof l)switch(n.state={},null!=n.attrs&&z(n.attrs,n,r),l){case"#":!function(e,t,n){t.dom=a(e).createTextNode(t.children),_(e,t.dom,n)}(t,n,o);break;case"<":v(t,n,i,o);break;case"[":!function(e,t,n,r,i){var o=a(e).createDocumentFragment();if(null!=t.children){var s=t.children;f(o,s,0,s.length,n,null,r)}t.dom=o.firstChild,t.domSize=o.childNodes.length,_(e,o,i)}(t,n,r,i,o);break;default:!function(e,t,n,r,i){var o=t.tag,l=t.attrs,u=l&&l.is;r=s(t)||r;var c=r?u?a(e).createElementNS(r,o,{is:u}):a(e).createElementNS(r,o):u?a(e).createElement(o,{is:u}):a(e).createElement(o);t.dom=c,null!=l&&function(e,t,n){for(var r in t)T(e,r,null,t[r],n)}(t,l,r);if(_(e,c,i),!k(t)&&null!=t.children){var d=t.children;f(c,d,0,d.length,n,null,r),"select"===t.tag&&null!=l&&function(e,t){if("value"in t)if(null===t.value)-1!==e.dom.selectedIndex&&(e.dom.value=null);else{var n=""+t.value;e.dom.value===n&&-1!==e.dom.selectedIndex||(e.dom.value=n)}"selectedIndex"in t&&T(e,"selectedIndex",null,t.selectedIndex,void 0)}(t,l)}}(t,n,r,i,o)}else!function(t,n,r,i,o){(function(t,n){var r;if("function"==typeof t.tag.view){if(t.state=Object.create(t.tag),null!=(r=t.state.view).$$reentrantLock$$)return;r.$$reentrantLock$$=!0}else{if(t.state=void 0,null!=(r=t.tag).$$reentrantLock$$)return;r.$$reentrantLock$$=!0,t.state=null!=t.tag.prototype&&"function"==typeof t.tag.prototype.view?new t.tag(t):t.tag(t)}z(t.state,t,n),null!=t.attrs&&z(t.attrs,t,n);if(t.instance=e.normalize(u.call(t.state.view,t)),t.instance===t)throw Error("A view cannot return the vnode it received as argument");r.$$reentrantLock$$=null})(n,r),null!=n.instance?(d(t,n.instance,r,i,o),n.dom=n.instance.dom,n.domSize=null!=n.dom?n.instance.domSize:0):n.domSize=0}(t,n,r,i,o)}var h={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function v(e,t,n,r){var i=t.children.match(/^\s*?<(\w+)/im)||[],o=a(e).createElement(h[i[1]]||"div");"http://www.w3.org/2000/svg"===n?(o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t.children+"</svg>",o=o.firstChild):o.innerHTML=t.children,t.dom=o.firstChild,t.domSize=o.childNodes.length;for(var s,l=a(e).createDocumentFragment();s=o.firstChild;)l.appendChild(s);_(e,l,r)}function p(e,t,n,r,i,o){if(t!==n&&(null!=t||null!=n))if(null==t||0===t.length)f(e,n,0,n.length,r,i,o);else if(null==n||0===n.length)S(e,t,0,t.length);else{var a=null!=t[0]&&null!=t[0].key,s=null!=n[0]&&null!=n[0].key,l=0,u=0;if(!a)for(;u<t.length&&null==t[u];)u++;if(!s)for(;l<n.length&&null==n[l];)l++;if(a!==s)S(e,t,u,t.length),f(e,n,l,n.length,r,i,o);else if(s){for(var c,h,v,p,g,_=t.length-1,k=n.length-1;_>=u&&k>=l&&(v=t[_],p=n[k],v.key===p.key);)v!==p&&y(e,v,p,r,i,o),null!=p.dom&&(i=p.dom),_--,k--;for(;_>=u&&k>=l&&(c=t[u],h=n[l],c.key===h.key);)u++,l++,c!==h&&y(e,c,h,r,b(t,u,i),o);for(;_>=u&&k>=l&&l!==k&&c.key===p.key&&v.key===h.key;)x(e,v,g=b(t,u,i)),v!==h&&y(e,v,h,r,g,o),++l<=--k&&x(e,c,i),c!==p&&y(e,c,p,r,i,o),null!=p.dom&&(i=p.dom),u++,v=t[--_],p=n[k],c=t[u],h=n[l];for(;_>=u&&k>=l&&v.key===p.key;)v!==p&&y(e,v,p,r,i,o),null!=p.dom&&(i=p.dom),k--,v=t[--_],p=n[k];if(l>k)S(e,t,u,_+1);else if(u>_)f(e,n,l,k+1,r,i,o);else{var E,C,T=i,j=k-l+1,I=new Array(j),M=0,P=0,A=2147483647,R=0;for(P=0;P<j;P++)I[P]=-1;for(P=k;P>=l;P--){null==E&&(E=m(t,u,_+1));var z=E[(p=n[P]).key];null!=z&&(A=z<A?z:-1,I[P-l]=z,v=t[z],t[z]=null,v!==p&&y(e,v,p,r,i,o),null!=p.dom&&(i=p.dom),R++)}if(i=T,R!==_-u+1&&S(e,t,u,_+1),0===R)f(e,n,l,k+1,r,i,o);else if(-1===A)for(C=function(e){var t=[0],n=0,r=0,i=0,o=w.length=e.length;for(i=0;i<o;i++)w[i]=e[i];for(i=0;i<o;++i)if(-1!==e[i]){var a=t[t.length-1];if(e[a]<e[i])w[i]=a,t.push(i);else{for(n=0,r=t.length-1;n<r;){var s=(n>>>1)+(r>>>1)+(n&r&1);e[t[s]]<e[i]?n=s+1:r=s}e[i]<e[t[n]]&&(n>0&&(w[i]=t[n-1]),t[n]=i)}}n=t.length,r=t[n-1];for(;n-- >0;)t[n]=r,r=w[r];return w.length=0,t}(I),M=C.length-1,P=k;P>=l;P--)h=n[P],-1===I[P-l]?d(e,h,r,o,i):C[M]===P-l?M--:x(e,h,i),null!=h.dom&&(i=n[P].dom);else for(P=k;P>=l;P--)h=n[P],-1===I[P-l]&&d(e,h,r,o,i),null!=h.dom&&(i=n[P].dom)}}else{var N=t.length<n.length?t.length:n.length;for(l=l<u?l:u;l<N;l++)(c=t[l])===(h=n[l])||null==c&&null==h||(null==c?d(e,h,r,o,b(t,l+1,i)):null==h?O(e,c):y(e,c,h,r,b(t,l+1,i),o));t.length>N&&S(e,t,l,t.length),n.length>N&&f(e,n,l,n.length,r,i,o)}}}function y(t,n,r,i,o,a){var l=n.tag;if(l===r.tag){if(r.state=n.state,r.events=n.events,function(e,t){do{var n;if(null!=e.attrs&&"function"==typeof e.attrs.onbeforeupdate)if(void 0!==(n=u.call(e.attrs.onbeforeupdate,e,t))&&!n)break;if("string"!=typeof e.tag&&"function"==typeof e.state.onbeforeupdate)if(void 0!==(n=u.call(e.state.onbeforeupdate,e,t))&&!n)break;return!1}while(0);return e.dom=t.dom,e.domSize=t.domSize,e.instance=t.instance,e.attrs=t.attrs,e.children=t.children,e.text=t.text,!0}(r,n))return;if("string"==typeof l)switch(null!=r.attrs&&N(r.attrs,r,i),l){case"#":!function(e,t){e.children.toString()!==t.children.toString()&&(e.dom.nodeValue=t.children);t.dom=e.dom}(n,r);break;case"<":!function(e,t,n,r,i){t.children!==n.children?(E(e,t,void 0),v(e,n,r,i)):(n.dom=t.dom,n.domSize=t.domSize)}(t,n,r,a,o);break;case"[":!function(e,t,n,r,i,o){p(e,t.children,n.children,r,i,o);var a=0,s=n.children;if(n.dom=null,null!=s){for(var l=0;l<s.length;l++){var u=s[l];null!=u&&null!=u.dom&&(null==n.dom&&(n.dom=u.dom),a+=u.domSize||1)}1!==a&&(n.domSize=a)}}(t,n,r,i,o,a);break;default:!function(e,t,n,r){var i=t.dom=e.dom;r=s(t)||r,function(e,t,n,r){t&&t===n&&console.warn("Don't reuse attrs object, use new object for every redraw, this will throw in next major");if(null!=n)for(var i in n)T(e,i,t&&t[i],n[i],r);var o;if(null!=t)for(var i in t)null==(o=t[i])||null!=n&&null!=n[i]||j(e,i,o,r)}(t,e.attrs,t.attrs,r),k(t)||p(i,e.children,t.children,n,null,r)}(n,r,i,a)}else!function(t,n,r,i,o,a){if(r.instance=e.normalize(u.call(r.state.view,r)),r.instance===r)throw Error("A view cannot return the vnode it received as argument");N(r.state,r,i),null!=r.attrs&&N(r.attrs,r,i);null!=r.instance?(null==n.instance?d(t,r.instance,i,a,o):y(t,n.instance,r.instance,i,o,a),r.dom=r.instance.dom,r.domSize=r.instance.domSize):null!=n.instance?(O(t,n.instance),r.dom=void 0,r.domSize=0):(r.dom=n.dom,r.domSize=n.domSize)}(t,n,r,i,o,a)}else O(t,n),d(t,r,i,a,o)}function m(e,t,n){for(var r=Object.create(null);t<n;t++){var i=e[t];if(null!=i){var o=i.key;null!=o&&(r[o]=t)}}return r}var g,w=[];function b(e,t,n){for(;t<e.length;t++)if(null!=e[t]&&null!=e[t].dom)return e[t].dom;return n}function x(e,t,n){if(null!=t.dom){var i;if(null==t.domSize)i=t.dom;else for(var o of(i=a(e).createDocumentFragment(),r(t)))i.appendChild(o);_(e,i,n)}}function _(e,t,n){null!=n?e.insertBefore(t,n):e.appendChild(t)}function k(e){if(null==e.attrs||null==e.attrs.contenteditable&&null==e.attrs.contentEditable)return!1;var t=e.children;if(null!=t&&1===t.length&&"<"===t[0].tag){var n=t[0].children;e.dom.innerHTML!==n&&(e.dom.innerHTML=n)}else if(null!=t&&0!==t.length)throw new Error("Child node of a contenteditable must be trusted.");return!0}function S(e,t,n,r){for(var i=n;i<r;i++){var o=t[i];null!=o&&O(e,o)}}function O(e,t){var o,a,s,c,f=0,d=t.state;"string"!=typeof t.tag&&"function"==typeof t.state.onbeforeremove&&(null!=(s=u.call(t.state.onbeforeremove,t))&&"function"==typeof s.then&&(f=1,o=s));t.attrs&&"function"==typeof t.attrs.onbeforeremove&&(null!=(s=u.call(t.attrs.onbeforeremove,t))&&"function"==typeof s.then&&(f|=2,a=s));if(l(t,d),f){for(var h of(c=i,r(t)))n.set(h,c);null!=o&&o.finally((function(){1&f&&((f&=2)||(l(t,d),C(t),E(e,t,c)))})),null!=a&&a.finally((function(){2&f&&((f&=1)||(l(t,d),C(t),E(e,t,c)))}))}else C(t),E(e,t,c)}function E(e,t,i){if(null!=t.dom)if(null==t.domSize)n.get(t.dom)===i&&e.removeChild(t.dom);else for(var o of r(t,{generation:i}))e.removeChild(o)}function C(e){if("string"!=typeof e.tag&&"function"==typeof e.state.onremove&&u.call(e.state.onremove,e),e.attrs&&"function"==typeof e.attrs.onremove&&u.call(e.attrs.onremove,e),"string"!=typeof e.tag)null!=e.instance&&C(e.instance);else{var t=e.children;if(Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];null!=r&&C(r)}}}function T(e,t,n,r,i){if("key"!==t&&"is"!==t&&null!=r&&!I(t)&&(n!==r||function(e,t){return"value"===t||"checked"===t||"selectedIndex"===t||"selected"===t&&e.dom===c(e.dom)||"option"===e.tag&&e.dom.parentNode===c(e.dom)}(e,t)||"object"==typeof r)){if("o"===t[0]&&"n"===t[1])return R(e,t,r);if("xlink:"===t.slice(0,6))e.dom.setAttributeNS("http://www.w3.org/1999/xlink",t.slice(6),r);else if("style"===t)P(e.dom,n,r);else if(M(e,t,i)){if("value"===t){var o="input"===e.tag&&"file"===e.attrs.type;if(("input"===e.tag||"textarea"===e.tag)&&e.dom.value===""+r&&(o||e.dom===c(e.dom)))return;if("select"===e.tag&&null!==n&&e.dom.value===""+r)return;if("option"===e.tag&&null!==n&&e.dom.value===""+r)return;if(o&&""+r!="")return void console.error("`value` is read-only on file inputs!")}"input"===e.tag&&"type"===t?e.dom.setAttribute(t,r):e.dom[t]=r}else"boolean"==typeof r?r?e.dom.setAttribute(t,""):e.dom.removeAttribute(t):e.dom.setAttribute("className"===t?"class":t,r)}}function j(e,t,n,r){if("key"!==t&&"is"!==t&&null!=n&&!I(t))if("o"===t[0]&&"n"===t[1])R(e,t,void 0);else if("style"===t)P(e.dom,n,null);else if(!M(e,t,r)||"className"===t||"title"===t||"value"===t&&("option"===e.tag||"select"===e.tag&&-1===e.dom.selectedIndex&&e.dom===c(e.dom))||"input"===e.tag&&"type"===t){var i=t.indexOf(":");-1!==i&&(t=t.slice(i+1)),!1!==n&&e.dom.removeAttribute("className"===t?"class":t)}else e.dom[t]=null}function I(e){return"oninit"===e||"oncreate"===e||"onupdate"===e||"onremove"===e||"onbeforeremove"===e||"onbeforeupdate"===e}function M(e,t,n){return void 0===n&&(e.tag.indexOf("-")>-1||null!=e.attrs&&e.attrs.is||"href"!==t&&"list"!==t&&"form"!==t&&"width"!==t&&"height"!==t)&&t in e.dom}function P(e,t,n){if(t===n);else if(null==n)e.style="";else if("object"!=typeof n)e.style=n;else if(null==t||"object"!=typeof t)for(var r in e.style.cssText="",n){null!=(i=n[r])&&(r.includes("-")?e.style.setProperty(r,String(i)):e.style[r]=String(i))}else{for(var r in n){var i;null!=(i=n[r])&&(i=String(i))!==String(t[r])&&(r.includes("-")?e.style.setProperty(r,i):e.style[r]=i)}for(var r in t)null!=t[r]&&null==n[r]&&(r.includes("-")?e.style.removeProperty(r):e.style[r]="")}}function A(){this._=t}function R(e,n,r){if(null!=e.events){if(e.events._=t,e.events[n]===r)return;null==r||"function"!=typeof r&&"object"!=typeof r?(null!=e.events[n]&&e.dom.removeEventListener(n.slice(2),e.events,!1),e.events[n]=void 0):(null==e.events[n]&&e.dom.addEventListener(n.slice(2),e.events,!1),e.events[n]=r)}else null==r||"function"!=typeof r&&"object"!=typeof r||(e.events=new A,e.dom.addEventListener(n.slice(2),e.events,!1),e.events[n]=r)}function z(e,t,n){"function"==typeof e.oninit&&u.call(e.oninit,t),"function"==typeof e.oncreate&&n.push(u.bind(e.oncreate,t))}function N(e,t,n){"function"==typeof e.onupdate&&n.push(u.bind(e.onupdate,t))}return A.prototype=Object.create(null),A.prototype.handleEvent=function(e){var t,n=this["on"+e.type];"function"==typeof n?t=n.call(e.currentTarget,e):"function"==typeof n.handleEvent&&n.handleEvent(e),this._&&!1!==e.redraw&&(0,this._)(),!1===t&&(e.preventDefault(),e.stopPropagation())},function(n,r,o){if(!n)throw new TypeError("DOM element being rendered to does not exist.");if(null!=g&&n.contains(g))throw new TypeError("Node is currently being rendered to and thus is locked.");var a=t,s=g,l=[],u=c(n),f=n.namespaceURI;g=n,t="function"==typeof o?o:void 0,i={};try{null==n.vnodes&&(n.textContent=""),r=e.normalizeChildren(Array.isArray(r)?r:[r]),p(n,n.vnodes,r,l,null,"http://www.w3.org/1999/xhtml"===f?void 0:f),n.vnodes=r,null!=u&&c(n)!==u&&"function"==typeof u.focus&&u.focus();for(var d=0;d<l.length;d++)l[d]()}finally{t=a,g=s}}},y}function te(){return w?g:(w=1,g=ee()("undefined"!=typeof window?window:null))}function ne(){if(k)return _;k=1;var e=te();return _=function(){if(x)return b;x=1;var e=W();return b=function(t,n,r){var i=[],o=!1,a=-1;function s(){for(a=0;a<i.length;a+=2)try{t(i[a],e(i[a+1]),l)}catch(e){r.error(e)}a=-1}function l(){o||(o=!0,n((function(){o=!1,s()})))}return l.sync=s,{mount:function(n,r){if(null!=r&&null==r.view&&"function"!=typeof r)throw new TypeError("m.mount expects a component, not a vnode.");var o=i.indexOf(n);o>=0&&(i.splice(o,2),o<=a&&(a-=2),t(n,[])),null!=r&&(i.push(n,r),t(n,e(r),l))},redraw:l}},b}()(e,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:null,"undefined"!=typeof console?console:null),_}function re(){return O?S:(O=1,S=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return"";var t=[];for(var n in e)r(n,e[n]);return t.join("&");function r(e,n){if(Array.isArray(n))for(var i=0;i<n.length;i++)r(e+"["+i+"]",n[i]);else if("[object Object]"===Object.prototype.toString.call(n))for(var i in n)r(e+"["+i+"]",n[i]);else t.push(encodeURIComponent(e)+(null!=n&&""!==n?"="+encodeURIComponent(n):""))}})}function ie(){if(C)return E;C=1;var e=re();return E=function(t,n){if(/:([^\/\.-]+)(\.{3})?:/.test(t))throw new SyntaxError("Template parameter names must be separated by either a '/', '-', or '.'.");if(null==n)return t;var r=t.indexOf("?"),i=t.indexOf("#"),o=i<0?t.length:i,a=r<0?o:r,s=t.slice(0,a),l={};Object.assign(l,n);var u=s.replace(/:([^\/\.-]+)(\.{3})?/g,(function(e,t,r){return delete l[t],null==n[t]?e:r?n[t]:encodeURIComponent(String(n[t]))})),c=u.indexOf("?"),f=u.indexOf("#"),d=f<0?u.length:f,h=c<0?d:c,v=u.slice(0,h);r>=0&&(v+=t.slice(r,o)),c>=0&&(v+=(r<0?"?":"&")+u.slice(c,d));var p=e(l);return p&&(v+=(r<0&&c<0?"?":"&")+p),i>=0&&(v+=t.slice(i)),f>=0&&(v+=(i<0?"":"&")+u.slice(f)),v},E}function oe(){if(j)return T;j=1;var e=ie(),t=Q();return T=function(n,r){function i(e){return new Promise(e)}function o(e,n){for(var r in e.headers)if(t.call(e.headers,r)&&r.toLowerCase()===n)return!0;return!1}return i.prototype=Promise.prototype,i.__proto__=Promise,{request:function(a,s){"string"!=typeof a?(s=a,a=a.url):null==s&&(s={});var l=function(r,i){return new Promise((function(a,s){r=e(r,i.params);var l,u=null!=i.method?i.method.toUpperCase():"GET",c=i.body,f=(null==i.serialize||i.serialize===JSON.serialize)&&!(c instanceof n.FormData||c instanceof n.URLSearchParams),d=i.responseType||("function"==typeof i.extract?"":"json"),h=new n.XMLHttpRequest,v=!1,p=!1,y=h,m=h.abort;for(var g in h.abort=function(){v=!0,m.call(this)},h.open(u,r,!1!==i.async,"string"==typeof i.user?i.user:void 0,"string"==typeof i.password?i.password:void 0),f&&null!=c&&!o(i,"content-type")&&h.setRequestHeader("Content-Type","application/json; charset=utf-8"),"function"==typeof i.deserialize||o(i,"accept")||h.setRequestHeader("Accept","application/json, text/*"),i.withCredentials&&(h.withCredentials=i.withCredentials),i.timeout&&(h.timeout=i.timeout),h.responseType=d,i.headers)t.call(i.headers,g)&&h.setRequestHeader(g,i.headers[g]);h.onreadystatechange=function(e){if(!v&&4===e.target.readyState)try{var t,n=e.target.status>=200&&e.target.status<300||304===e.target.status||/^file:\/\//i.test(r),o=e.target.response;if("json"===d){if(!e.target.responseType&&"function"!=typeof i.extract)try{o=JSON.parse(e.target.responseText)}catch(e){o=null}}else d&&"text"!==d||null==o&&(o=e.target.responseText);if("function"==typeof i.extract?(o=i.extract(e.target,i),n=!0):"function"==typeof i.deserialize&&(o=i.deserialize(o)),n){if("function"==typeof i.type)if(Array.isArray(o))for(var l=0;l<o.length;l++)o[l]=new i.type(o[l]);else o=new i.type(o);a(o)}else{var u=function(){try{t=e.target.responseText}catch(e){t=o}var n=new Error(t);n.code=e.target.status,n.response=o,s(n)};0===h.status?setTimeout((function(){p||u()})):u()}}catch(e){s(e)}},h.ontimeout=function(e){p=!0;var t=new Error("Request timed out");t.code=e.target.status,s(t)},"function"==typeof i.config&&(h=i.config(h,i,r)||h)!==y&&(l=h.abort,h.abort=function(){v=!0,l.call(this)}),null==c?h.send():"function"==typeof i.serialize?h.send(i.serialize(c)):c instanceof n.FormData||c instanceof n.URLSearchParams?h.send(c):h.send(JSON.stringify(c))}))}(a,s);if(!0===s.background)return l;var u=0;function c(){0==--u&&"function"==typeof r&&r()}return function e(t){var n=t.then;return t.constructor=i,t.then=function(){u++;var r=n.apply(t,arguments);return r.then(c,(function(e){if(c(),0===u)throw e})),e(r)},t}(l)}}},T}function ae(){if(M)return I;M=1;var e=ne();return I=oe()("undefined"!=typeof window?window:null,e.redraw)}function se(){if(A)return P;function e(e){try{return decodeURIComponent(e)}catch(t){return e}}return A=1,P=function(t){if(""===t||null==t)return{};"?"===t.charAt(0)&&(t=t.slice(1));for(var n=t.split("&"),r={},i={},o=0;o<n.length;o++){var a=n[o].split("="),s=e(a[0]),l=2===a.length?e(a[1]):"";"true"===l?l=!0:"false"===l&&(l=!1);var u=s.split(/\]\[?|\[/),c=i;s.indexOf("[")>-1&&u.pop();for(var f=0;f<u.length;f++){var d=u[f],h=u[f+1],v=""==h||!isNaN(parseInt(h,10));if(""===d)null==r[s=u.slice(0,f).join()]&&(r[s]=Array.isArray(c)?c.length:0),d=r[s]++;else if("__proto__"===d)break;if(f===u.length-1)c[d]=l;else{var p=Object.getOwnPropertyDescriptor(c,d);null!=p&&(p=p.value),null==p&&(c[d]=p=v?[]:{}),c=p}}}return i}}function le(){if(z)return R;z=1;var e=se();return R=function(t){var n=t.indexOf("?"),r=t.indexOf("#"),i=r<0?t.length:r,o=n<0?i:n,a=t.slice(0,o).replace(/\/{2,}/g,"/");return a?"/"!==a[0]&&(a="/"+a):a="/",{path:a,params:n<0?{}:e(t.slice(n+1,i))}}}function ue(){if(U)return N;U=1;var e=le();return N=function(t){var n=e(t),r=Object.keys(n.params),i=[],o=new RegExp("^"+n.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,(function(e,t,n){return null==t?"\\"+e:(i.push({k:t,r:"..."===n}),"..."===n?"(.*)":"."===n?"([^/]+)\\.":"([^/]+)"+(n||""))}))+"$");return function(e){for(var t=0;t<r.length;t++)if(n.params[r[t]]!==e.params[r[t]])return!1;if(!i.length)return o.test(e.path);var a=o.exec(e.path);if(null==a)return!1;for(t=0;t<i.length;t++)e.params[i[t].k]=i[t].r?a[t+1]:decodeURIComponent(a[t+1]);return!0}},N}function ce(){if(L)return D;L=1;var e=Q(),t=new RegExp("^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$");return D=function(n,r){var i={};if(null!=r)for(var o in n)e.call(n,o)&&!t.test(o)&&r.indexOf(o)<0&&(i[o]=n[o]);else for(var o in n)e.call(n,o)&&!t.test(o)&&(i[o]=n[o]);return i}}function fe(){if(K)return F;K=1;var e=ne();return F=function(){if($)return q;$=1;var e=W(),t=X(),n=ie(),r=le(),i=ue(),o=ce(),a={};function s(e){try{return decodeURIComponent(e)}catch(t){return e}}return q=function(l,u){var c,f,d,h,v,p,y=null==l?null:"function"==typeof l.setImmediate?l.setImmediate:l.setTimeout,m=Promise.resolve(),g=!1,w=!1,b=0,x=a,_={onbeforeupdate:function(){return!(!(b=b?2:1)||a===x)},onremove:function(){l.removeEventListener("popstate",O,!1),l.removeEventListener("hashchange",S,!1)},view:function(){if(b&&a!==x){var t=[e(d,h.key,h)];return x&&(t=x.render(t[0])),t}}},k=C.SKIP={};function S(){g=!1;var e=l.location.hash;"#"!==C.prefix[0]&&(e=l.location.search+e,"?"!==C.prefix[0]&&"/"!==(e=l.location.pathname+e)[0]&&(e="/"+e));var t=e.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,s).slice(C.prefix.length),n=r(t);function i(e){console.error(e),E(f,null,{replace:!0})}Object.assign(n.params,l.history.state),function e(r){for(;r<c.length;r++)if(c[r].check(n)){var o=c[r].component,a=c[r].route,s=o,l=p=function(i){if(l===p){if(i===k)return e(r+1);d=null==i||"function"!=typeof i.view&&"function"!=typeof i?"div":i,h=n.params,v=t,p=null,x=o.render?o:null,2===b?u.redraw():(b=2,u.redraw.sync())}};return void(o.view||"function"==typeof o?(o={},l(s)):o.onmatch?m.then((function(){return o.onmatch(n.params,t,a)})).then(l,t===f?null:i):l("div"))}if(t===f)throw new Error("Could not resolve default route "+f+".");E(f,null,{replace:!0})}(0)}function O(){g||(g=!0,y(S))}function E(e,t,r){if(e=n(e,t),w){O();var i=r?r.state:null,o=r?r.title:null;r&&r.replace?l.history.replaceState(i,o,C.prefix+e):l.history.pushState(i,o,C.prefix+e)}else l.location.href=C.prefix+e}function C(e,t,n){if(!e)throw new TypeError("DOM element being rendered to does not exist.");if(c=Object.keys(n).map((function(e){if("/"!==e[0])throw new SyntaxError("Routes must start with a '/'.");if(/:([^\/\.-]+)(\.{3})?:/.test(e))throw new SyntaxError("Route parameter names must be separated with either '/', '.', or '-'.");return{route:e,component:n[e],check:i(e)}})),f=t,null!=t){var o=r(t);if(!c.some((function(e){return e.check(o)})))throw new ReferenceError("Default route doesn't match any known routes.")}"function"==typeof l.history.pushState?l.addEventListener("popstate",O,!1):"#"===C.prefix[0]&&l.addEventListener("hashchange",S,!1),w=!0,u.mount(e,_),S()}return C.set=function(e,t,n){null!=p&&((n=n||{}).replace=!0),p=null,E(e,t,n)},C.get=function(){return v},C.prefix="#!",C.Link={view:function(e){var r,i,a,s=t(e.attrs.selector||"a",o(e.attrs,["options","params","selector","onclick"]),e.children);return(s.attrs.disabled=Boolean(s.attrs.disabled))?(s.attrs.href=null,s.attrs["aria-disabled"]="true"):(r=e.attrs.options,i=e.attrs.onclick,a=n(s.attrs.href,e.attrs.params),s.attrs.href=C.prefix+a,s.attrs.onclick=function(e){var t;"function"==typeof i?t=i.call(e.currentTarget,e):null==i||"object"!=typeof i||"function"==typeof i.handleEvent&&i.handleEvent(e),!1===t||e.defaultPrevented||0!==e.button&&0!==e.which&&1!==e.which||e.currentTarget.target&&"_self"!==e.currentTarget.target||e.ctrlKey||e.metaKey||e.shiftKey||e.altKey||(e.preventDefault(),e.redraw=!1,C.set(a,null,r))}),s}},C.param=function(e){return h&&null!=e?h[e]:h},C},q}()("undefined"!=typeof window?window:null,e),F}var de=function(){if(V)return G;V=1;var e=Y(),t=ae(),n=ne(),r=Z(),i=function(){return e.apply(this,arguments)};return i.m=e,i.trust=e.trust,i.fragment=e.fragment,i.Fragment="[",i.mount=n.mount,i.route=fe(),i.render=te(),i.redraw=n.redraw,i.request=t.request,i.parseQueryString=se(),i.buildQueryString=re(),i.parsePathname=le(),i.buildPathname=ie(),i.vnode=W(),i.censor=ce(),i.domFor=r.domFor,G=i}(),he=B(de);function ve(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;class pe{constructor(e="http://localhost:5000/api/aggregation/status"){this._baseUrl=e}getClientStatuses(){return ve(this,void 0,void 0,(function*(){return yield he.request({method:"GET",url:this._baseUrl,withCredentials:!0})}))}getClientStatus(e){return ve(this,void 0,void 0,(function*(){return yield he.request({method:"GET",url:this._baseUrl,params:{sessionId:e},withCredentials:!0})}))}}class ye{constructor(e="http://localhost:5000/api/aggregation/config/"){this._baseUrl=e}getClientConfigs(){return ve(this,void 0,void 0,(function*(){return yield he.request({method:"GET",url:this._baseUrl+"client",withCredentials:!0})}))}getClientConfig(e){return ve(this,void 0,void 0,(function*(){return yield he.request({method:"GET",url:this._baseUrl+"client/"+e,withCredentials:!0})}))}createClient(e){return ve(this,void 0,void 0,(function*(){return yield he.request({method:"POST",url:this._baseUrl+"client",body:e,withCredentials:!0})}))}updateClient(e){return ve(this,void 0,void 0,(function*(){return yield he.request({method:"PUT",url:this._baseUrl+"client/"+e.id,body:e,withCredentials:!0})}))}getClientChannels(e){return ve(this,void 0,void 0,(function*(){return yield he.request({method:"GET",url:this._baseUrl+"client/"+e+"/channel"})}))}getChannel(e){return ve(this,void 0,void 0,(function*(){return yield he.request({method:"GET",url:this._baseUrl+"client/channel/"+e})}))}}class me{view(){return he("nav",{class:"border-b overflow-hidden p-2 border-gray-400 mx-auto w-full max-w-screen-xl"},he("div",{class:"flex items-center"},[he(he.route.Link,{class:"font-sans antialiased text-xl text-current mx-2 block py-1 font-semibold",href:"/status"},"UA Aggregation"),he("div",{class:"ml-auto mr-2 block"},[he("ul",{class:"m-2 flex flex-row gap-x-3 gap-y-1 m-0 items-center"},[he("li",he(he.route.Link,{class:"font-sans antialiased text-xl text-current p-1 hover:text-primary",href:"/status"},"Status")),he("li",he(he.route.Link,{class:"font-sans antialiased text-xl text-current p-1 hover:text-primary",href:"/config"},"Config"))])])]))}}class ge{view(){return he("footer",{class:"border-t overflow-hidden p-2 border-gray-400 mx-auto w-full max-w-screen-xl"},he("p",{class:"font-sans antialiased text-base text-current text-center"},"OPC UA Aggregation Client"))}}const we=document.getElementById("header"),be=document.getElementById("footer");class xe{oninit(){he.mount(we,me),he.mount(be,ge)}view(e){return he("div",{class:"w-full max-w-screen-xl"},e.children)}}class _e{view(e){return he("div",{class:"m-2 p-2 overflow-hidden rounded-lg border border-gray-400"},e.children)}}class ke{view(e){var t,n,r,i,o;return he("dl",{class:"w-sm divide-y divide-gray-400"},[he("div",{class:"flex flex-col pb-3"},[he("dt",{class:"mb-1 text-lg text-gray-400"},"Session ID: "),he("dd",{class:"text-lg font-semibold"},null===(t=e.attrs.config)||void 0===t?void 0:t.id)]),he("div",{class:"flex flex-col pb-3"},[he("dt",{class:"mb-1 text-lg text-gray-400"},"Session Name: "),he("dd",{class:"text-lg font-semibold"},null===(n=e.attrs.config)||void 0===n?void 0:n.sessionName)]),he("div",{class:"flex flex-col pb-3"},[he("dt",{class:"mb-1 text-lg text-gray-400"},"Session URI: "),he("dd",{class:"text-lg font-semibold"},null===(r=e.attrs.config)||void 0===r?void 0:r.serverUri)]),he("div",{class:"flex flex-col pb-3"},[he("dt",{class:"mb-1 text-lg text-gray-400"},"Description: "),he("dd",{class:"text-lg font-semibold"},null===(i=e.attrs.config)||void 0===i?void 0:i.description)]),he("div",{class:"flex flex-col pb-3"},[he("dt",{class:"mb-1 text-lg text-gray-400"},"Enabled: "),he("dd",{class:"text-lg font-semibold"},(null===(o=e.attrs.config)||void 0===o?void 0:o.enabled)?"Enabled":"Disabld")])])}}class Se{view(e){var t,n,r;return he("dl",{class:"w-sm divide-y divide-gray-400"},[he("div",{class:"flex flex-col pb-3"},[he("dt",{class:"mb-1 text-lg text-gray-400"},"Keep Alive Interval: "),he("dd",{class:"text-lg font-semibold"},null===(t=e.attrs.config)||void 0===t?void 0:t.keepAliveInterval)]),he("div",{class:"flex flex-col pb-3"},[he("dt",{class:"mb-1 text-lg text-gray-400"},"Reconnect Period: "),he("dd",{class:"text-lg font-semibold"},null===(n=e.attrs.config)||void 0===n?void 0:n.reconnectPeriod)]),he("div",{class:"flex flex-col pb-3"},[he("dt",{class:"mb-1 text-lg text-gray-400"},"Session Lifetime: "),he("dd",{class:"text-lg font-semibold"},null===(r=e.attrs.config)||void 0===r?void 0:r.sessionLifetime)])])}}class Oe{view(e){return he("tr",{class:"border-b border-gray-400 last:border-0"},[he("td",{class:"p-3"},e.attrs.channel.nodeId),he("td",{class:"p-3"},e.attrs.channel.name),he("td",{class:"p-3"},e.attrs.channel.description),he("td",{class:"p-3"},e.attrs.channel.id)])}}class Ee{view(e){var t;return he("table",{class:"w-full"},[he("thead",{class:"border-b border-gray-400 bg-gray-400 text-gray-900 text-sm font-medium"},he("tr",[he("th",{class:"px-2.5 py-2 text-start font-medium"},"Node Id"),he("th",{class:"px-2.5 py-2 text-start font-medium"},"Name"),he("th",{class:"px-2.5 py-2 text-start font-medium"},"Description"),he("th",{class:"px-2.5 py-2 text-start font-medium"},"")])),he("tbody",{class:"text-sm"},null===(t=e.attrs.channels)||void 0===t?void 0:t.map((e=>he(Oe,{channel:e}))))])}}var Ce,Te,je={};
/*! *****************************************************************************
	Copyright (C) Microsoft. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */!function(){return Ce||(Ce=1,function(e){!function(){var t="object"==typeof globalThis?globalThis:"object"==typeof H?H:"object"==typeof self?self:"object"==typeof this?this:function(){try{return Function("return this;")()}catch(e){}}()||function(){try{return(0,eval)("(function() { return this; })()")}catch(e){}}(),n=r(e);function r(e,t){return function(n,r){Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}void 0!==t.Reflect&&(n=r(t.Reflect,n)),function(e,t){var n=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,i=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",a="function"==typeof Object.create,s={__proto__:[]}instanceof Array,l=!a&&!s,u={create:a?function(){return fe(Object.create(null))}:s?function(){return fe({__proto__:null})}:function(){return fe({})},has:l?function(e,t){return n.call(e,t)}:function(e,t){return t in e},get:l?function(e,t){return n.call(e,t)?e[t]:void 0}:function(e,t){return e[t]}},c=Object.getPrototypeOf(Function),f="function"==typeof Map&&"function"==typeof Map.prototype.entries?Map:le(),d="function"==typeof Set&&"function"==typeof Set.prototype.entries?Set:ue(),h="function"==typeof WeakMap?WeakMap:ce(),v=r?Symbol.for("@reflect-metadata:registry"):void 0,p=ie(),y=oe(p);function m(e,t,n,r){if(U(n)){if(!H(e))throw new TypeError;if(!W(t))throw new TypeError;return C(e,t)}if(!H(e))throw new TypeError;if(!q(t))throw new TypeError;if(!q(r)&&!U(r)&&!D(r))throw new TypeError;return D(r)&&(r=void 0),T(e,t,n=V(n),r)}function g(e,t){function n(n,r){if(!q(n))throw new TypeError;if(!U(r)&&!J(r))throw new TypeError;A(e,t,n,r)}return n}function w(e,t,n,r){if(!q(n))throw new TypeError;return U(r)||(r=V(r)),A(e,t,n,r)}function b(e,t,n){if(!q(t))throw new TypeError;return U(n)||(n=V(n)),j(e,t,n)}function x(e,t,n){if(!q(t))throw new TypeError;return U(n)||(n=V(n)),I(e,t,n)}function _(e,t,n){if(!q(t))throw new TypeError;return U(n)||(n=V(n)),M(e,t,n)}function k(e,t,n){if(!q(t))throw new TypeError;return U(n)||(n=V(n)),P(e,t,n)}function S(e,t){if(!q(e))throw new TypeError;return U(t)||(t=V(t)),R(e,t)}function O(e,t){if(!q(e))throw new TypeError;return U(t)||(t=V(t)),z(e,t)}function E(e,t,n){if(!q(t))throw new TypeError;if(U(n)||(n=V(n)),!q(t))throw new TypeError;U(n)||(n=V(n));var r=se(t,n,!1);return!U(r)&&r.OrdinaryDeleteMetadata(e,t,n)}function C(e,t){for(var n=e.length-1;n>=0;--n){var r=(0,e[n])(t);if(!U(r)&&!D(r)){if(!W(r))throw new TypeError;t=r}}return t}function T(e,t,n,r){for(var i=e.length-1;i>=0;--i){var o=(0,e[i])(t,n,r);if(!U(o)&&!D(o)){if(!q(o))throw new TypeError;r=o}}return r}function j(e,t,n){if(I(e,t,n))return!0;var r=ne(t);return!D(r)&&j(e,r,n)}function I(e,t,n){var r=se(t,n,!1);return!U(r)&&K(r.OrdinaryHasOwnMetadata(e,t,n))}function M(e,t,n){if(I(e,t,n))return P(e,t,n);var r=ne(t);return D(r)?void 0:M(e,r,n)}function P(e,t,n){var r=se(t,n,!1);if(!U(r))return r.OrdinaryGetOwnMetadata(e,t,n)}function A(e,t,n,r){se(n,r,!0).OrdinaryDefineOwnMetadata(e,t,n,r)}function R(e,t){var n=z(e,t),r=ne(e);if(null===r)return n;var i=R(r,t);if(i.length<=0)return n;if(n.length<=0)return i;for(var o=new d,a=[],s=0,l=n;s<l.length;s++){var u=l[s];o.has(u)||(o.add(u),a.push(u))}for(var c=0,f=i;c<f.length;c++){u=f[c];o.has(u)||(o.add(u),a.push(u))}return a}function z(e,t){var n=se(e,t,!1);return n?n.OrdinaryOwnMetadataKeys(e,t):[]}function N(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function U(e){return void 0===e}function D(e){return null===e}function L(e){return"symbol"==typeof e}function q(e){return"object"==typeof e?null!==e:"function"==typeof e}function $(e,t){switch(N(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n="string",r=X(e,i);if(void 0!==r){var o=r.call(e,n);if(q(o))throw new TypeError;return o}return F(e)}function F(e,t){var n,r,i=e.toString;if(B(i)&&!q(r=i.call(e)))return r;if(B(n=e.valueOf)&&!q(r=n.call(e)))return r;throw new TypeError}function K(e){return!!e}function G(e){return""+e}function V(e){var t=$(e);return L(t)?t:G(t)}function H(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function B(e){return"function"==typeof e}function W(e){return"function"==typeof e}function J(e){switch(N(e)){case 3:case 4:return!0;default:return!1}}function Q(e,t){return e===t||e!=e&&t!=t}function X(e,t){var n=e[t];if(null!=n){if(!B(n))throw new TypeError;return n}}function Y(e){var t=X(e,o);if(!B(t))throw new TypeError;var n=t.call(e);if(!q(n))throw new TypeError;return n}function Z(e){return e.value}function ee(e){var t=e.next();return!t.done&&t}function te(e){var t=e.return;t&&t.call(e)}function ne(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===c)return t;if(t!==c)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var i=r.constructor;return"function"!=typeof i||i===e?t:i}function re(){var e,n,r,i;U(v)||void 0===t.Reflect||v in t.Reflect||"function"!=typeof t.Reflect.defineMetadata||(e=ae(t.Reflect));var o=new h,a={registerProvider:s,getProvider:u,setProvider:p};return a;function s(t){if(!Object.isExtensible(a))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case e===t:break;case U(n):n=t;break;case n===t:break;case U(r):r=t;break;case r===t:break;default:void 0===i&&(i=new d),i.add(t)}}function l(t,o){if(!U(n)){if(n.isProviderFor(t,o))return n;if(!U(r)){if(r.isProviderFor(t,o))return n;if(!U(i))for(var a=Y(i);;){var s=ee(a);if(!s)return;var l=Z(s);if(l.isProviderFor(t,o))return te(a),l}}}if(!U(e)&&e.isProviderFor(t,o))return e}function u(e,t){var n,r=o.get(e);return U(r)||(n=r.get(t)),U(n)?(U(n=l(e,t))||(U(r)&&(r=new f,o.set(e,r)),r.set(t,n)),n):n}function c(e){if(U(e))throw new TypeError;return n===e||r===e||!U(i)&&i.has(e)}function p(e,t,n){if(!c(n))throw new Error("Metadata provider not registered.");var r=u(e,t);if(r!==n){if(!U(r))return!1;var i=o.get(e);U(i)&&(i=new f,o.set(e,i)),i.set(t,n)}return!0}}function ie(){var e;return!U(v)&&q(t.Reflect)&&Object.isExtensible(t.Reflect)&&(e=t.Reflect[v]),U(e)&&(e=re()),!U(v)&&q(t.Reflect)&&Object.isExtensible(t.Reflect)&&Object.defineProperty(t.Reflect,v,{enumerable:!1,configurable:!1,writable:!1,value:e}),e}function oe(e){var t=new h,n={isProviderFor:function(e,n){var r=t.get(e);return!U(r)&&r.has(n)},OrdinaryDefineOwnMetadata:a,OrdinaryHasOwnMetadata:i,OrdinaryGetOwnMetadata:o,OrdinaryOwnMetadataKeys:s,OrdinaryDeleteMetadata:l};return p.registerProvider(n),n;function r(r,i,o){var a=t.get(r),s=!1;if(U(a)){if(!o)return;a=new f,t.set(r,a),s=!0}var l=a.get(i);if(U(l)){if(!o)return;if(l=new f,a.set(i,l),!e.setProvider(r,i,n))throw a.delete(i),s&&t.delete(r),new Error("Wrong provider for target.")}return l}function i(e,t,n){var i=r(t,n,!1);return!U(i)&&K(i.has(e))}function o(e,t,n){var i=r(t,n,!1);if(!U(i))return i.get(e)}function a(e,t,n,i){r(n,i,!0).set(e,t)}function s(e,t){var n=[],i=r(e,t,!1);if(U(i))return n;for(var o=Y(i.keys()),a=0;;){var s=ee(o);if(!s)return n.length=a,n;var l=Z(s);try{n[a]=l}catch(e){try{te(o)}finally{throw e}}a++}}function l(e,n,i){var o=r(n,i,!1);if(U(o))return!1;if(!o.delete(e))return!1;if(0===o.size){var a=t.get(n);U(a)||(a.delete(i),0===a.size&&t.delete(a))}return!0}}function ae(e){var t=e.defineMetadata,n=e.hasOwnMetadata,r=e.getOwnMetadata,i=e.getOwnMetadataKeys,o=e.deleteMetadata,a=new h;return{isProviderFor:function(e,t){var n=a.get(e);return!(U(n)||!n.has(t))||!!i(e,t).length&&(U(n)&&(n=new d,a.set(e,n)),n.add(t),!0)},OrdinaryDefineOwnMetadata:t,OrdinaryHasOwnMetadata:n,OrdinaryGetOwnMetadata:r,OrdinaryOwnMetadataKeys:i,OrdinaryDeleteMetadata:o}}function se(e,t,n){var r=p.getProvider(e,t);if(!U(r))return r;if(n){if(p.setProvider(e,t,y))return y;throw new Error("Illegal state.")}}function le(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,Q(t,this._cacheKey)&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,i)},t.prototype.entries=function(){return new n(this._keys,this._values,a)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){if(!Q(this._cacheKey,e)){this._cacheIndex=-1;for(var n=0;n<this._keys.length;n++)if(Q(this._keys[n],e)){this._cacheIndex=n;break}}return this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function i(e,t){return t}function a(e,t){return[e,t]}}function ue(){return function(){function e(){this._map=new f}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.keys()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}()}function ce(){var e=16,t=u.create(),r=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=o(e,!1);return void 0!==t&&u.has(t,this._key)},e.prototype.get=function(e){var t=o(e,!1);return void 0!==t?u.get(t,this._key):void 0},e.prototype.set=function(e,t){return o(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=o(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var e;do{e="@@WeakMap@@"+l()}while(u.has(t,e));return t[e]=!0,e}function o(e,t){if(!n.call(e,r)){if(!t)return;Object.defineProperty(e,r,{value:u.create()})}return e[r]}function a(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function s(e){if("function"==typeof Uint8Array){var t=new Uint8Array(e);return"undefined"!=typeof crypto?crypto.getRandomValues(t):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(t):a(t,e),t}return a(new Array(e),e)}function l(){var t=s(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<e;++r){var i=t[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}function fe(e){return e.__=void 0,delete e.__,e}e("decorate",m),e("metadata",g),e("defineMetadata",w),e("hasMetadata",b),e("hasOwnMetadata",x),e("getMetadata",_),e("getOwnMetadata",k),e("getMetadataKeys",S),e("getOwnMetadataKeys",O),e("deleteMetadata",E)}(n,t),void 0===t.Reflect&&(t.Reflect=e)}()}(e||(e={}))),je;var e}(),function(e){e[e.Singleton=0]="Singleton",e[e.Transient=1]="Transient"}(Te||(Te={}));class Ie{constructor(){this.services=new Map}static getInstance(){return Ie.instance||(Ie.instance=new Ie),Ie.instance}registerSingleton(e,t){this.services.set(e,{service:t,scope:Te.Singleton})}registerTransient(e,t){this.services.set(e,{service:t,scope:Te.Transient})}resolve(e){const t=this.services.get(e);if(!t)throw new Error(`Service ${e} not found`);return t.scope===Te.Singleton?(t.instance||(t.instance=this.createInstance(t.service)),t.instance):this.createInstance(t.service)}createInstance(e){if("function"==typeof e&&!e.prototype)return e();if("function"==typeof e){return new e(...this.getDependencies(e))}return e}getDependencies(e){return(Reflect.getMetadata("design:paramtypes",e)||[]).map((e=>this.resolve(e.name)))}}const Me=Ie.getInstance();class Pe{constructor(){this._service=Me.resolve("IClientConfigService")}oninit(e){return ve(this,void 0,void 0,(function*(){this.config=yield this._service.getClientConfig(e.attrs.id),void 0!==this.config.id&&(this.config.channels=yield this._service.getClientChannels(this.config.id))}))}view(e){var t;return he("div",[he("div",{class:"flex flex-wrap"},[he(_e,he(ke,{config:this.config})),he(_e,he(Se,{config:this.config}))]),he("div",{class:"flex flex-col"},[he(_e,he(Ee,{channels:null===(t=this.config)||void 0===t?void 0:t.channels}))])])}}class Ae{view(e){var t,n,r,i,o;return he("tr",{class:"border-b border-gray-400 last:border-0"},[he("td",{class:"p-3"},null===(t=e.attrs.config)||void 0===t?void 0:t.sessionName),he("td",{class:"p-3"},null===(n=e.attrs.config)||void 0===n?void 0:n.serverUri),he("td",{class:"p-3"},null===(r=e.attrs.config)||void 0===r?void 0:r.description),he("td",{class:"p-3"},(null===(i=e.attrs.config)||void 0===i?void 0:i.enabled)?"Enabled":"Disabled"),he("td",{class:"p-3"},he(he.route.Link,{class:"font-sans antialiased text-sm text-current font-medium hover:text-primary",href:"/config/"+(null===(o=e.attrs.config)||void 0===o?void 0:o.id)},"Details"))])}}class Re{view(e){var t;return he("table",{class:"w-full"},[he("thead",{class:"border-b border-gray-400 bg-gray-400 text-gray-900 text-sm font-medium"},[he("tr",[he("th",{class:"px-2.5 py-2 text-start font-medium"},"Name"),he("th",{class:"px-2.5 py-2 text-start font-medium"},"Server Uri"),he("th",{class:"px-2.5 py-2 text-start font-medium"},"Description"),he("th",{class:"px-2.5 py-2 text-start font-medium"},"Enabled"),he("th",{class:"px-2.5 py-2 text-start font-medium"},"Details")])]),he("tbody",{class:"group text-sm"},null===(t=e.attrs.configs)||void 0===t?void 0:t.map((e=>he(Ae,{config:e}))))])}}class ze{view(e){return he("div",{class:"m-1 p-1 flex flex-row justify-end items-center"},e.children)}}class Ne{constructor(){this.variants={default:"border-gray-200 text-gray-200 hover:text-gray-900 hover:bg-gray-400 focus:ring-gray-600",green:"border-green-400 text-green-400 hover:text-gray-900 hover:bg-green-400 focus:ring-green-600",red:"border-red-400 text-red-400 hover:text-gray-900 hover:bg-red-400 focus:ring-red-600",yellow:"border-yellow-400 text-yellow-400 hover:text-gray-900 hover:bg-yellow-400 focus:ring-yellow-600"}}view(e){var t,n;return he("button",{class:"border px-5 py-2 mr-2 text-sm rounded-lg focus:ring-4 font-medium text-center focus:outline-none "+this.variants[null!==(t=e.attrs.variant)&&void 0!==t?t:"default"],onclick:e.attrs.onclick,type:null!==(n=e.attrs.type)&&void 0!==n?n:"button"},e.attrs.label)}}class Ue{constructor(e){Object.assign(this,e)}}class De{constructor(e,t,n,r,i,o,a=!1,s=""){this.name=e,this.label=t,this.type=n,this.placeholder=r,this.required=i,this.validation=o,this.hidden=a,this.initialValue=s,this.error="",this.isTouched=!1,this.value=s}setValue(e){this.value=e,this.isTouched=!0,this.validate()}validate(){if(this.required&&!this.value)return this.error="This field is required.",!1;if(this.validation){const e=this.validation(this.value);if(e)return this.error=e,!1}return this.error="",!0}isValid(){return!this.error}}class Le{constructor(e,t){this.fields=[],this.fields=e.map((e=>new De(e.name,e.label,e.type,e.placeholder,e.required,e.validation,e.hidden,t?t[e.name]:"")))}validate(){return this.fields.every((e=>e.validate()))}getFormData(){return this.fields.reduce(((e,t)=>(e[t.name]=t.value,e)),{})}isValid(){return this.fields.every((e=>e.isValid()))}}class qe{constructor(e){this.onSubmit=e=>{e.preventDefault(),this.formGroup.validate()?this.attrs.onSubmit(this.formGroup.getFormData()):he.redraw()},this.attrs=e.attrs,this.formGroup=new Le(this.attrs.configs,this.attrs.initialValues)}view(e){return he("form",{onsubmit:this.onSubmit,class:"max-w-md mx-auto p-2 rounded-lg"},this.formGroup.fields.map((e=>he("div",{class:"mb-4"},[!e.hidden&&he("label",{class:"block text-sm font-bold"},e.label),"textarea"===e.type?he("textarea",{class:"mt-1 block w-full p-2 border border-gray-400 rounded-md",placeholder:e.placeholder,value:e.value,hidden:e.hidden,oninput:t=>{e.setValue(t.target.value)}}):he("input",{class:"form-input mt-1 p-2 block w-full border border-gray-400 rounded-md",type:e.type,placeholder:e.placeholder,value:e.value,hidden:e.hidden,oninput:t=>{e.setValue(t.target.value)}}),e.error&&he("p",{class:"text-red-500 text-xs italic"},e.error)]))),he(ze,[he(Ne,{type:"submit",label:"Submit"})]))}}class $e{view(e){const{onClose:t}=e.attrs;return he("div",{onclick:t,class:"fixed inset-0 bg-gray-950/50  flex justify-center items-center"},he("div",{class:"bg-gray-800 p-2 rounded-lg max-w-md w-full",onclick:e=>e.stopPropagation()},e.children))}}class Fe{constructor(e){this.handleSubmit=e=>{this.attrs.onSubmit(Object.assign(Object.assign({},this.attrs.config),{id:e.id?Number(e.id):void 0,sessionName:e.sessionName,serverUri:e.serverUri,description:e.description})),this.attrs.onClose()},this.attrs=e.attrs}view(e){return he($e,{onClose:e.attrs.onClose},[he(qe,{onSubmit:this.handleSubmit,configs:e.attrs.formFieldConfigs})])}}const Ke=[{name:"id",label:"ID",type:"text",hidden:!0},{name:"sessionName",label:"Session Name",type:"text",placeholder:"Session name",required:!0},{name:"serverUri",label:"Server URI",type:"text",placeholder:"Server URI",required:!0},{name:"description",label:"Description",type:"text",placeholder:"Description",required:!0}];class Ge{constructor(){this.isModalOpen=!1,this.toggleModal=()=>{this.isModalOpen=!this.isModalOpen,he.redraw()},this.addOrUpdateClient=e=>ve(this,void 0,void 0,(function*(){var t;if(e.id)return void(yield this._service.updateClient(e));const n=yield this._service.createClient(e);null===(t=this.clientConfigs)||void 0===t||t.push(n)})),this._service=Me.resolve("IClientConfigService")}oninit(){return ve(this,void 0,void 0,(function*(){this.clientConfigs=yield this._service.getClientConfigs()}))}view(){return he("div",{class:"flex flex-col"},[he(ze,[he(Ne,{onclick:this.toggleModal,label:"Add Client"})]),he(_e,he(Re,{configs:this.clientConfigs})),this.isModalOpen&&he(Fe,{formFieldConfigs:Ke,config:this.selectedConfig||new Ue({}),onSubmit:this.addOrUpdateClient,onClose:this.toggleModal})])}}const Ve=e=>new Date(e).toLocaleDateString("ru-RU",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),He=e=>0===e?"Good":"Bad",Be={view:e=>he("tr",{class:"border-b border-gray-400 last:border-0"},[he("td",{class:"p-3"},e.attrs.item.tagId),he("td",{class:"p-3"},e.attrs.item.aggregationTag.value),he("td",{class:"p-3"},Ve(e.attrs.item.aggregationTag.timestamp)),he("td",{class:"p-3"},He(e.attrs.item.aggregationTag.statusCode))])};class We{view(e){var t;return he("table",{class:"w-full"},[he("thead",{class:"border-b border-gray-400 bg-gray-400 text-gray-900 text-sm font-medium"},he("tr",[he("th",{class:"px-2.5 py-2 text-start font-medium"},"Node Id"),he("th",{class:"px-2.5 py-2 text-start font-medium"},"Value"),he("th",{class:"px-2.5 py-2 text-start font-medium"},"Timestamp"),he("th",{class:"px-2.5 py-2 text-start font-medium"},"Quality")])),he("tbody",{class:"group text-sm"},null===(t=e.attrs.items)||void 0===t?void 0:t.map((e=>he(Be,{item:e}))))])}}class Je{view(e){var t,n,r,i;return he("dl",{class:"w-sm divide-y divide-gray-400"},[he("div",{class:"flex flex-col pb-3"},[he("dt",{class:"mb-1 text-lg text-gray-400"},"Session ID: "),he("dd",{class:"text-lg font-semibold"},null===(t=e.attrs.status)||void 0===t?void 0:t.id)]),he("div",{class:"flex flex-col pb-3"},[he("dt",{class:"mb-1 text-lg text-gray-400"},"Session Name: "),he("dd",{class:"text-lg font-semibold"},null===(n=e.attrs.status)||void 0===n?void 0:n.sessionName)]),he("div",{class:"flex flex-col pb-3"},[he("dt",{class:"mb-1 text-lg text-gray-400"},"Session URI: "),he("dd",{class:"text-lg font-semibold"},null===(r=e.attrs.status)||void 0===r?void 0:r.serverUri)]),he("div",{class:"flex flex-col pb-3"},[he("dt",{class:"mb-1 text-lg text-gray-400"},"Connect Error: "),he("dd",{class:"text-lg font-semibold"},null===(i=e.attrs.status)||void 0===i?void 0:i.connectError)])])}}class Qe{constructor(){this._service=Me.resolve("IClientStatusService")}oninit(e){return ve(this,void 0,void 0,(function*(){this.status=yield this._service.getClientStatus(e.attrs.id)}))}view(e){var t;return he("div",[he("div",{class:"flex flex-wrap"},[he(_e,he(Je,{status:this.status}))]),he("div",{class:"flex flex-col"},[he(_e,he(We,{items:null===(t=this.status)||void 0===t?void 0:t.monitoredItems}))])])}}class Xe{view(e){var t,n,r,i;return he("tr",{class:"border-b border-gray-400 last:border-0"},[he("td",{class:"p-3"},null===(t=e.attrs.status)||void 0===t?void 0:t.sessionName),he("td",{class:"p-3"},null===(n=e.attrs.status)||void 0===n?void 0:n.serverUri),he("td",{class:"p-3"},null===(r=e.attrs.status)||void 0===r?void 0:r.connectError),he("td",{class:"p-3"},he(he.route.Link,{class:"font-sans antialiased text-sm text-current font-medium hover:text-primary",href:"/status/"+(null===(i=e.attrs.status)||void 0===i?void 0:i.id)},"Details"))])}}class Ye{view(e){var t;return he("table",{class:"w-full"},[he("thead",{class:"border-b border-gray-400 bg-gray-400 text-gray-900 text-sm font-medium"},[he("tr",[he("th",{class:"px-2.5 py-2 text-start font-medium"},"Name"),he("th",{class:"px-2.5 py-2 text-start font-medium"},"Server Uri"),he("th",{class:"px-2.5 py-2 text-start font-medium"},"Connect Error"),he("th",{class:"px-2.5 py-2 text-start font-medium"},"Monitored Items")])]),he("tbody",{class:"group text-sm"},null===(t=e.attrs.statuses)||void 0===t?void 0:t.map((e=>he(Xe,{status:e}))))])}}class Ze{constructor(){this._service=Me.resolve("IClientStatusService")}oninit(){return ve(this,void 0,void 0,(function*(){this.statusesList=yield this._service.getClientStatuses()}))}view(){return he("div",{class:"flex flex-col"},[he(_e,he(Ye,{statuses:this.statusesList}))])}}const et=document.getElementById("content"),tt="http://192.168.122.114:5000/api/aggregation";Me.registerSingleton("IClientStatusService",(()=>new pe(tt+"/status"))),Me.registerSingleton("IClientConfigService",(()=>new ye(tt+"/config/")));const nt={"/status":{render:()=>he(xe,he(Ze))},"/status/:key":{render:e=>he(xe,he(Qe,{id:e.attrs.key}))},"/config":{render:()=>he(xe,he(Ge))},"/config/:key":{render:e=>he(xe,he(Pe,{id:e.attrs.key}))}};he.route(et,"/status",nt)}();
